<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>HeQing</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2018-05-25T08:05:58.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>HeQing</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Swiftç¼–è§£ç </title>
    <link href="http://yoursite.com/2018/05/25/Swift%E7%BC%96%E8%A7%A3%E7%A0%81/"/>
    <id>http://yoursite.com/2018/05/25/Swiftç¼–è§£ç /</id>
    <published>2018-05-25T08:05:58.000Z</published>
    <updated>2018-05-25T08:05:58.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä»Šå¤©æ¥ç ”ç©¶ä¸€ä¸‹Swiftçš„ç¼–è§£ç ã€‚Swift 4.0 å¼•å…¥äº†Codableã€‚Codable æ˜¯ä¸€ç§ æ··åˆç±»å‹ï¼Œç”± Decodable å’Œ Encodable åè®®æ„æˆã€‚<br><a id="more"></a></p></blockquote><h4 id="1-æŠŠJsonæ–‡æœ¬è§£ææˆå¯¹è±¡"><a href="#1-æŠŠJsonæ–‡æœ¬è§£ææˆå¯¹è±¡" class="headerlink" title="1.æŠŠJsonæ–‡æœ¬è§£ææˆå¯¹è±¡"></a>1.æŠŠJsonæ–‡æœ¬è§£ææˆå¯¹è±¡</h4><p>é¦–å…ˆæˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªæ¨¡å‹ï¼Œéµå¾ª<code>Decodable</code>åè®®ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span>: <span class="title">Decodable</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> sex: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>Decodable</code>åè®®å®šä¹‰äº†ä¸€ä¸ªåˆå§‹åŒ–å‡½æ•°ï¼Œä½¿ç”¨<code>Decoder</code>å¯¹è±¡åˆå§‹åŒ–ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">init(from decoder: Decoder) throws</span><br></pre></td></tr></table></figure><p><code>Decoder</code>åè®®éœ€è¦é˜æ˜å°†<code>Decodable</code>å¯¹è±¡çš„ <em>è¡¨ç¤º</em> è§£ç æˆå¯¹è±¡çš„è¦æ±‚ã€‚ä¸ºäº†é€‚åº”å„ç§æ•°æ®äº¤æ¢æ ¼å¼ï¼Œè§£ç å™¨å’Œç¼–ç å™¨éƒ½ä½¿ç”¨åä¸º <em>å®¹å™¨</em>ï¼ˆcontainerï¼‰çš„æŠ½è±¡ã€‚å®¹å™¨æ˜¯ç”¨æ¥å­˜å‚¨å€¼çš„ï¼Œå¯ä»¥å­˜å‚¨ä¸€ä¸ªå€¼ä¹Ÿå¯ä»¥å­˜å‚¨å¤šä¸ªå€¼ï¼Œå¯ä»¥åƒå­—å…¸ä¸€æ ·æœ‰é”®å»å¯¹åº”å€¼ï¼Œä¹Ÿå¯ä»¥åƒæ•°ç»„ä¸€æ ·ä¸éœ€è¦é”®ã€‚</p><p>æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæšä¸¾æ¥å®Œæˆæ¨¡å‹å±æ€§åç§°å’Œå®¹å™¨çš„é”®ä¹‹é—´çš„æ˜ å°„ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span>: <span class="title">Decodable</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">enum</span> <span class="title">CodingKeys</span>: <span class="title">String</span>, <span class="title">CodingKey</span> </span>&#123;</span><br><span class="line">        <span class="keyword">case</span> name</span><br><span class="line">        <span class="keyword">case</span> sex</span><br><span class="line">        <span class="keyword">case</span> age</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥è°ƒç”¨åˆå§‹åŒ–æ–¹æ³•ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">init</span>(from decoder: <span class="type">Decoder</span>) <span class="keyword">throws</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> container = <span class="keyword">try</span> decoder.container(keyedBy: <span class="type">CodingKeys</span>.<span class="keyword">self</span>)</span><br><span class="line">    <span class="keyword">self</span>.name = <span class="keyword">try</span> container.decode(<span class="type">String</span>.<span class="keyword">self</span>, forKey: .name)</span><br><span class="line">    <span class="keyword">self</span>.sex = <span class="keyword">try</span> container.decode(<span class="type">String</span>.<span class="keyword">self</span>, forKey: .sex)</span><br><span class="line">    <span class="keyword">self</span>.age = <span class="keyword">try</span> container.decode(<span class="type">Int</span>.<span class="keyword">self</span>, forKey: .age)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®šä¹‰ä¸€ä¸ªJsonï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> json = <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            "</span>name<span class="string">": "</span><span class="type">HQ</span><span class="string">",</span></span><br><span class="line"><span class="string">            "</span>sex<span class="string">": "</span><span class="type">Man</span><span class="string">",</span></span><br><span class="line"><span class="string">            "</span>age<span class="string">": 18,</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        "</span><span class="string">""</span>.data(using: .utf8)!</span><br></pre></td></tr></table></figure><p>è§£ç ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> decoder = <span class="type">JSONDecoder</span>()</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> person = <span class="keyword">try</span>? decoder.decode(<span class="type">Person</span>.<span class="keyword">self</span>, from: json) &#123;</span><br><span class="line">    <span class="built_in">print</span>(person.name) <span class="comment">// HQ</span></span><br><span class="line">    <span class="built_in">print</span>(person.sex)  <span class="comment">// Man</span></span><br><span class="line">    <span class="built_in">print</span>(person.age)  <span class="comment">// 18</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-æŠŠå¯¹è±¡è¿˜åŸæˆJson"><a href="#2-æŠŠå¯¹è±¡è¿˜åŸæˆJson" class="headerlink" title="2.æŠŠå¯¹è±¡è¿˜åŸæˆJson"></a>2.æŠŠå¯¹è±¡è¿˜åŸæˆJson</h4><p>å¯¹è±¡è¿˜åŸæˆJsonï¼Œè¦éµå¾ª<code>Encodable</code>åè®®ã€‚<br>å®ƒå®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">encode</span><span class="params">(to encoder: Encoder)</span></span> <span class="keyword">throws</span></span><br></pre></td></tr></table></figure><p><code>Encoder</code>å¯¹è±¡éƒ½å¯ä»¥åˆ›å»ºéµä»äº†<code>Encodable</code>åè®®ç±»å‹çš„è¡¨ç¤ºã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">encode</span><span class="params">(to encoder: Encoder)</span></span> <span class="keyword">throws</span> &#123;</span><br><span class="line"><span class="keyword">var</span> container = encoder.container(keyedBy: <span class="type">CodingKeys</span>.<span class="keyword">self</span>)</span><br><span class="line">   <span class="keyword">try</span> container.encode(<span class="keyword">self</span>.name, forKey: .name)</span><br><span class="line">   <span class="keyword">try</span> container.encode(<span class="keyword">self</span>.sex, forKey: .sex)</span><br><span class="line">   <span class="keyword">try</span> container.encode(<span class="keyword">self</span>.age, forKey: .age)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–ç ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> person = <span class="keyword">try</span>? decoder.decode(<span class="type">Person</span>.<span class="keyword">self</span>, from: json) &#123;</span><br><span class="line">    <span class="built_in">print</span>(person.name) <span class="comment">// HQ</span></span><br><span class="line">    <span class="built_in">print</span>(person.sex)  <span class="comment">// Man</span></span><br><span class="line">    <span class="built_in">print</span>(person.age)  <span class="comment">// 18</span></span><br><span class="line">            </span><br><span class="line">    <span class="keyword">let</span> encoder = <span class="type">JSONEncoder</span>()</span><br><span class="line">    encoder.outputFormatting = .prettyPrinted</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> personJson = <span class="keyword">try</span>? encoder.encode(person) &#123;</span><br><span class="line">       <span class="built_in">print</span>(<span class="type">String</span>(data: personJson, encoding: .utf8)!)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span> : <span class="string">"HQ1"</span>,</span><br><span class="line">  <span class="string">"sex"</span> : <span class="string">"Man"</span>,</span><br><span class="line">  <span class="string">"age"</span> : <span class="number">18</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-ç²¾ç®€ä»£ç "><a href="#3-ç²¾ç®€ä»£ç " class="headerlink" title="3.ç²¾ç®€ä»£ç "></a>3.ç²¾ç®€ä»£ç </h4><p>åˆ é™¤æ¨¡å‹ä¸­çš„ä»£ç ï¼Œåªç•™ä¸‹å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span>: <span class="title">Codable</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> sex: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åè¿è¡Œç¨‹åºï¼Œå‘ç°ç¼–è§£ç åŠŸèƒ½ä¾ç„¶å¯ä»¥æˆåŠŸï¼<br>Swiftè‡ªåŠ¨æ•´åˆäº†<code>Decodable</code> å’Œ <code>Encodable</code>ã€‚<code>Codable</code>å®Œæˆäº†ä¸¤ä¸ªè¿‡ç¨‹ï¼š ä¸€ä¸ªæ˜¯å®Œæˆ Decodable ç›¸å…³çš„å·¥ä½œï¼Œå¦ä¸€ä¸ªæ˜¯å¤„ç† Encodable ç›¸å…³çš„ã€‚<br>ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬çš„æ¨¡å‹åªéœ€è¦ä½¿ç”¨<code>Codable</code>åè®®ï¼Œæ¨¡å‹ä¸­çš„å±æ€§ä¼šè‡ªåŠ¨å°Šä»<code>Codable</code>åè®®ã€‚</p><h4 id="4-å¤æ‚ç‚¹çš„Json"><a href="#4-å¤æ‚ç‚¹çš„Json" class="headerlink" title="4.å¤æ‚ç‚¹çš„Json"></a>4.å¤æ‚ç‚¹çš„Json</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> json = <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            "</span>persons<span class="string">": [</span></span><br><span class="line"><span class="string">                &#123;</span></span><br><span class="line"><span class="string">                    "</span>name<span class="string">": "</span><span class="type">HQ1</span><span class="string">",</span></span><br><span class="line"><span class="string">                    "</span>sex<span class="string">": "</span><span class="type">Man</span><span class="string">",</span></span><br><span class="line"><span class="string">                    "</span>age<span class="string">": 18,</span></span><br><span class="line"><span class="string">                &#125;,</span></span><br><span class="line"><span class="string">                &#123;</span></span><br><span class="line"><span class="string">                    "</span>name<span class="string">": "</span><span class="type">HQ2</span><span class="string">",</span></span><br><span class="line"><span class="string">                    "</span>sex<span class="string">": "</span><span class="type">Woman</span><span class="string">",</span></span><br><span class="line"><span class="string">                    "</span>age<span class="string">": 20,</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">            ]</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        "</span><span class="string">""</span>.data(using: .utf8)!</span><br></pre></td></tr></table></figure><p>ç¼–è§£ç ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> decoder = <span class="type">JSONDecoder</span>()</span><br><span class="line"><span class="keyword">let</span> keyedPersons = <span class="keyword">try</span>! decoder.decode([<span class="type">String</span>: [<span class="type">Person</span>]].<span class="keyword">self</span>, from: json)</span><br><span class="line"><span class="keyword">let</span> persons = keyedPersons[<span class="string">"persons"</span>]</span><br><span class="line"><span class="built_in">print</span>(persons!)</span><br><span class="line">            </span><br><span class="line"><span class="keyword">let</span> encoder = <span class="type">JSONEncoder</span>()</span><br><span class="line">encoder.outputFormatting = .prettyPrinted</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> personJson = <span class="keyword">try</span>? encoder.encode(keyedPersons) &#123;</span><br><span class="line"><span class="built_in">print</span>(<span class="type">String</span>(data: personJson, encoding: .utf8)!)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Swift 4 çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼šæ¡ä»¶ä¸€è‡´æ€§ã€‚<br>å¦‚æœ <code>Array</code> å’Œ <code>Dictionary</code> åŒ…å«çš„ <code>KeyType</code> å’Œ <code>ValueType</code> éƒ½éµä» <code>Decodable</code> åè®®ï¼Œé‚£ä¹ˆè¿™æ ·çš„æ•°ç»„æˆ–å­—å…¸æœ¬èº«ä¹Ÿå°±éµä»äº† <code>Decodable</code> åè®®ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// swift/stdlib/public/core/Codable.swift.gyb</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Array</span> : <span class="title">Decodable</span> <span class="title">where</span> <span class="title">Element</span> : <span class="title">Decodable</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Dictionary</span> : <span class="title">Decodable</span> <span class="title">where</span> <span class="title">Key</span> : <span class="title">Decodable</span>, </span></span><br><span class="line"><span class="class">                                       <span class="title">Value</span> : <span class="title">Decodable</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¼˜åŒ–ä¸€ä¸‹ï¼š<br>æ–°å»ºä¸€ä¸ªæ¨¡å‹</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Persons</span>: <span class="title">Codable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> persons: [<span class="type">Person</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–è§£ç ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> decoder = <span class="type">JSONDecoder</span>()</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> keyedPersons = <span class="keyword">try</span>? decoder.decode(<span class="type">Persons</span>.<span class="keyword">self</span>, from: json) &#123;</span><br><span class="line">    <span class="keyword">let</span> persons = keyedPersons.persons</span><br><span class="line">    <span class="built_in">print</span>(persons)</span><br><span class="line">            </span><br><span class="line">    <span class="keyword">let</span> encoder = <span class="type">JSONEncoder</span>()</span><br><span class="line">    encoder.outputFormatting = .prettyPrinted</span><br><span class="line"><span class="comment">//    if let personJson = try? encoder.encode(keyedPersons) &#123;</span></span><br><span class="line"><span class="comment">//       print(String(data: personJson, encoding: .utf8)!)</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> personJson = <span class="keyword">try</span>? encoder.encode(persons.first) &#123;</span><br><span class="line">       <span class="built_in">print</span>(<span class="type">String</span>(data: personJson, encoding: .utf8)!)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ä»Šå¤©æ¥ç ”ç©¶ä¸€ä¸‹Swiftçš„ç¼–è§£ç ã€‚Swift 4.0 å¼•å…¥äº†Codableã€‚Codable æ˜¯ä¸€ç§ æ··åˆç±»å‹ï¼Œç”± Decodable å’Œ Encodable åè®®æ„æˆã€‚&lt;br&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="ç¼–è§£ç " scheme="http://yoursite.com/tags/%E7%BC%96%E8%A7%A3%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>Swiftè¯»ä¹¦ç¬”è®°</title>
    <link href="http://yoursite.com/2018/05/09/Swift%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2018/05/09/Swiftè¯»ä¹¦ç¬”è®°/</id>
    <published>2018-05-09T06:56:03.000Z</published>
    <updated>2018-05-10T03:31:43.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è¯» ç‹å· (onevcat). â€œSwifter - Swift å¿…å¤‡ Tips (ç¬¬ä¸‰ç‰ˆ)â€ ç¬”è®°<br><a id="more"></a></p></blockquote><h4 id="1-åè®®çš„æ–¹æ³•å£°æ˜ä¸ºä»€ä¹ˆè¦ä½¿ç”¨mutatingä¿®é¥°ï¼Ÿ"><a href="#1-åè®®çš„æ–¹æ³•å£°æ˜ä¸ºä»€ä¹ˆè¦ä½¿ç”¨mutatingä¿®é¥°ï¼Ÿ" class="headerlink" title="1.åè®®çš„æ–¹æ³•å£°æ˜ä¸ºä»€ä¹ˆè¦ä½¿ç”¨mutatingä¿®é¥°ï¼Ÿ"></a>1.åè®®çš„æ–¹æ³•å£°æ˜ä¸ºä»€ä¹ˆè¦ä½¿ç”¨mutatingä¿®é¥°ï¼Ÿ</h4><p>Swift çš„ mutating å…³é”®å­—ä¿®é¥°æ–¹æ³•æ˜¯ä¸ºäº†èƒ½åœ¨è¯¥æ–¹æ³•ä¸­ä¿®æ”¹ struct æˆ–æ˜¯ enum çš„å˜é‡ï¼Œæ‰€ä»¥å¦‚æœä½ æ²¡åœ¨åè®®æ–¹æ³•é‡Œå†™ mutating çš„è¯ï¼Œåˆ«äººå¦‚æœç”¨ struct æˆ–è€… enum æ¥å®ç°è¿™ä¸ªåè®®çš„è¯ï¼Œå°±ä¸èƒ½åœ¨æ–¹æ³•é‡Œæ”¹å˜è‡ªå·±çš„å˜é‡äº†ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Vehicle</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> numberOfWheels: <span class="type">Int</span> &#123;<span class="keyword">get</span>&#125;</span><br><span class="line">    <span class="keyword">var</span> color: <span class="type">UIColor</span> &#123;<span class="keyword">get</span> <span class="keyword">set</span>&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">changeColor</span><span class="params">()</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MyCar</span>: <span class="title">Vehicle</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> numberOfWheels = <span class="number">4</span></span><br><span class="line">    <span class="keyword">var</span> color = <span class="type">UIColor</span>.blue</span><br><span class="line"></span><br><span class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">changeColor</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="comment">// å› ä¸º `color` çš„ç±»å‹æ˜¯ `UIColor`ï¼Œè¿™é‡Œç›´æ¥å†™ .red å°±è¶³ä»¥æ¨æ–­ç±»å‹äº†</span></span><br><span class="line">        color = .red</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-çš„å®ç°åŸç†"><a href="#2-çš„å®ç°åŸç†" class="headerlink" title="2. ?? çš„å®ç°åŸç†"></a>2. ?? çš„å®ç°åŸç†</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> level: <span class="type">Int</span>?</span><br><span class="line"><span class="keyword">var</span> startLevel = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> currentLevel = level ?? startLevel</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­æˆ‘ä»¬æ²¡æœ‰è®¾ç½®è¿‡ levelï¼Œå› æ­¤æœ€å startLevel è¢«èµ‹å€¼ç»™äº† currentLevelã€‚å¦‚æœæˆ‘ä»¬å……æ»¡å¥½å¥‡å¿ƒåœ°ç‚¹è¿› ?? çš„å®šä¹‰ï¼Œå¯ä»¥çœ‹åˆ° ?? æœ‰ä¸¤ç§ç‰ˆæœ¬ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> ??&lt;T&gt;<span class="params">(<span class="keyword">optional</span>: T?, defaultValue: @autoclosure <span class="params">()</span></span></span> -&gt; <span class="type">T</span>?) -&gt; <span class="type">T</span>?</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> ??&lt;T&gt;<span class="params">(<span class="keyword">optional</span>: T?, defaultValue: @autoclosure <span class="params">()</span></span></span> -&gt; <span class="type">T</span>) -&gt; <span class="type">T</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œæˆ‘ä»¬çš„è¾“å…¥æ»¡è¶³çš„æ˜¯åè€…ï¼Œè™½ç„¶è¡¨é¢ä¸Šçœ‹ startLevel åªæ˜¯ä¸€ä¸ª Intï¼Œä½†æ˜¯å…¶å®åœ¨ä½¿ç”¨æ—¶å®ƒè¢«è‡ªåŠ¨å°è£…æˆäº†ä¸€ä¸ª () -&gt; Intï¼Œæœ‰äº†è¿™ä¸ªæç¤ºï¼Œæˆ‘ä»¬ä¸å¦¨æ¥çŒœæµ‹ä¸€ä¸‹ ?? çš„å®ç°å§ï¼š </p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> ??&lt;T&gt;<span class="params">(<span class="keyword">optional</span>: T?, defaultValue: @autoclosure <span class="params">()</span></span></span> -&gt; <span class="type">T</span>) -&gt; <span class="type">T</span> &#123;</span><br><span class="line">    <span class="keyword">switch</span> <span class="keyword">optional</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> .<span class="type">Some</span>(<span class="keyword">let</span> value):</span><br><span class="line">            <span class="keyword">return</span> value</span><br><span class="line">        <span class="keyword">case</span> .<span class="type">None</span>:</span><br><span class="line">            <span class="keyword">return</span> defaultValue()</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯èƒ½ä½ ä¼šæœ‰ç–‘é—®ï¼Œä¸ºä»€ä¹ˆè¿™é‡Œè¦ä½¿ç”¨ autoclosureï¼Œç›´æ¥æ¥å— T ä½œä¸ºå‚æ•°å¹¶è¿”å›ä¸è¡Œä¹ˆï¼Œä¸ºä½•è¦ç”¨ () -&gt; T è¿™æ ·çš„å½¢å¼åŒ…è£…ä¸€éï¼Œå²‚ä¸æ˜¯ç”»è›‡æ·»è¶³ï¼Ÿå…¶å®è¿™æ­£æ˜¯ autoclosure çš„ä¸€ä¸ªæœ€å€¼å¾—ç§°èµçš„åœ°æ–¹ã€‚å¦‚æœæˆ‘ä»¬ç›´æ¥ä½¿ç”¨ Tï¼Œé‚£ä¹ˆå°±æ„å‘³ç€åœ¨ ?? æ“ä½œç¬¦çœŸæ­£å–å€¼ä¹‹å‰ï¼Œæˆ‘ä»¬å°±å¿…é¡»å‡†å¤‡å¥½ä¸€ä¸ªé»˜è®¤å€¼ä¼ å…¥åˆ°è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œä¸€èˆ¬æ¥è¯´è¿™ä¸ä¼šæœ‰å¾ˆå¤§é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœè¿™ä¸ªé»˜è®¤å€¼æ˜¯é€šè¿‡ä¸€ç³»åˆ—å¤æ‚è®¡ç®—å¾—åˆ°çš„è¯ï¼Œå¯èƒ½ä¼šæˆä¸ºæµªè´¹ â€“ å› ä¸ºå…¶å®å¦‚æœ optional ä¸æ˜¯ nil çš„è¯ï¼Œæˆ‘ä»¬å®é™…ä¸Šæ˜¯å®Œå…¨æ²¡æœ‰ç”¨åˆ°è¿™ä¸ªé»˜è®¤å€¼ï¼Œè€Œä¼šç›´æ¥è¿”å› optional è§£åŒ…åçš„å€¼çš„ã€‚è¿™æ ·çš„å¼€é”€æ˜¯å®Œå…¨å¯ä»¥é¿å…çš„ï¼Œæ–¹æ³•å°±æ˜¯å°†é»˜è®¤å€¼çš„è®¡ç®—æ¨è¿Ÿåˆ° optional åˆ¤å®šä¸º nil ä¹‹åã€‚</p><p>å°±è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å·§å¦™åœ°ç»•è¿‡æ¡ä»¶åˆ¤æ–­å’Œå¼ºåˆ¶è½¬æ¢ï¼Œä»¥å¾ˆä¼˜é›…çš„å†™æ³•å¤„ç†å¯¹ Optional åŠé»˜è®¤å€¼çš„å–å€¼äº†ã€‚æœ€åè¦æä¸€å¥çš„æ˜¯ï¼Œ@autoclosure å¹¶ä¸æ”¯æŒå¸¦æœ‰è¾“å…¥å‚æ•°çš„å†™æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰å½¢å¦‚ () -&gt; T çš„å‚æ•°æ‰èƒ½ä½¿ç”¨è¿™ä¸ªç‰¹æ€§è¿›è¡Œç®€åŒ–ã€‚å¦å¤–å› ä¸ºè°ƒç”¨è€…å¾€å¾€å¾ˆå®¹æ˜“å¿½è§† @autoclosure è¿™ä¸ªç‰¹æ€§ï¼Œæ‰€ä»¥åœ¨å†™æ¥å— @autoclosure çš„æ–¹æ³•æ—¶è¿˜è¯·ç‰¹åˆ«å°å¿ƒï¼Œå¦‚æœåœ¨å®¹æ˜“äº§ç”Ÿæ­§ä¹‰æˆ–è€…è¯¯è§£çš„æ—¶å€™ï¼Œè¿˜æ˜¯ä½¿ç”¨å®Œæ•´çš„é—­åŒ…å†™æ³•ä¼šæ¯”è¾ƒå¥½ã€‚</p><h4 id="3-åˆ›å»ºæ–°çš„æ“ä½œç¬¦"><a href="#3-åˆ›å»ºæ–°çš„æ“ä½œç¬¦" class="headerlink" title="3.åˆ›å»ºæ–°çš„æ“ä½œç¬¦"></a>3.åˆ›å»ºæ–°çš„æ“ä½œç¬¦</h4><p>éœ€è¦å…ˆå¯¹å…¶è¿›è¡Œå£°æ˜ï¼Œå‘Šè¯‰ç¼–è¯‘å™¨è¿™ä¸ªç¬¦å·å…¶å®æ˜¯ä¸€ä¸ªæ“ä½œç¬¦ã€‚æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">precedencegroup <span class="type">DotProductPrecedence</span> &#123;</span><br><span class="line">    <span class="keyword">associativity</span>: <span class="keyword">none</span> <span class="comment">// å®šä¹‰äº†ç»“åˆå¾‹ï¼Œå³å¦‚æœå¤šä¸ªåŒç±»çš„æ“ä½œç¬¦é¡ºåºå‡ºç°çš„è®¡ç®—é¡ºåºã€‚</span></span><br><span class="line">    higherThan: <span class="type">MultiplicationPrecedence</span> <span class="comment">// å®šä¹‰è¿ç®—çš„ä¼˜å…ˆçº§</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// infix è¡¨ç¤ºè¦å®šä¹‰çš„æ˜¯ä¸€ä¸ªä¸­ä½æ“ä½œç¬¦ï¼Œå³å‰åéƒ½æ˜¯è¾“å…¥</span></span><br><span class="line"><span class="keyword">infix</span> <span class="keyword">operator</span> +*: <span class="type">DotProductPrecedence</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">func +* (left: Vector2D, right: Vector2D) -&gt; Double &#123;</span><br><span class="line">    return left.x * right.x + left.y * right.y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡è½½æ“ä½œç¬¦ä¸éœ€è¦å£°æ˜ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;è¯» ç‹å· (onevcat). â€œSwifter - Swift å¿…å¤‡ Tips (ç¬¬ä¸‰ç‰ˆ)â€ ç¬”è®°&lt;br&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="ç¬”è®°" scheme="http://yoursite.com/tags/%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>Swift inoutå…³é”®å­—çš„ä½¿ç”¨</title>
    <link href="http://yoursite.com/2018/05/08/Swift%20inout%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <id>http://yoursite.com/2018/05/08/Swift inoutå…³é”®å­—çš„ä½¿ç”¨/</id>
    <published>2018-05-08T05:58:42.000Z</published>
    <updated>2018-05-09T03:17:38.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä»Šå¤©çªç„¶çœ‹åˆ°inoutå…³é”®å­—soäº†è§£äº†ä¸€ä¸‹å…¶ç”¨æ³•<br><a id="more"></a></p></blockquote><p>inoutçš„ä½œç”¨æ˜¯å¼•ç”¨ç±»å‹ä¼ é€’ã€‚ä¸å…¶å¯¹åº”çš„æ˜¯å€¼ç±»å‹ä¼ é€’ã€‚</p><h4 id="1-å€¼ç±»å‹ä¼ é€’"><a href="#1-å€¼ç±»å‹ä¼ é€’" class="headerlink" title="1.å€¼ç±»å‹ä¼ é€’"></a>1.å€¼ç±»å‹ä¼ é€’</h4><p>å€¼ç±»å‹ä¸å¼•ç”¨ç±»å‹ç›¸å¯¹ï¼Œå€¼ç±»å‹çš„æ•°æ®ç‰¹å¾æ˜¯ï¼Œæ¯ä¸€ä¸ªå†…å­˜å®ä¾‹éƒ½ä¼šæœ‰ä¸€ä»½æ•°æ®copyã€‚åœ¨swiftè¯­è¨€ä¸­ï¼Œç”¨<code>struct</code>å®šä¹‰çš„ç±»å‹éƒ½æ˜¯å€¼ç±»å‹ï¼Œè¿™åŒ…æ‹¬äº†åŸºæœ¬æ•°æ®ç±»å‹<code>ï¼ˆIntï¼ŒStringï¼ŒDouble,Float)</code>,é›†åˆç±»å‹<code>ï¼ˆArrayï¼ŒDictionaryï¼ŒSetï¼‰</code>ç­‰ã€‚å€¼ç±»å‹åœ¨èµ‹å€¼å’Œä¼ é€’çš„è¿‡ç¨‹ä¸­ï¼Œä¼šè¡¨ç°å‡ºcopyæ•°æ®çš„æ€§è´¨ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> x = <span class="number">0</span></span><br><span class="line">    <span class="keyword">var</span> y = <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> point1 = <span class="type">Point</span>()</span><br><span class="line"><span class="keyword">var</span> point2 = point1</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å®šä¹‰ä¸¤ä¸ªå€¼ç±»å‹çš„å˜é‡point1ã€point2ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨point1å¯¹point2è¿›è¡Œèµ‹å€¼çš„æ—¶å€™ï¼Œç†è®ºä¸Šç¼–è¯‘å™¨ä¼šåˆ›å»ºpoint2å¯¹è±¡ï¼Œå¹¶å°†point1çš„æ•°æ®è¿›è¡Œä¸€æ¬¡copyèµ‹å€¼ç»™point2ã€‚å¦‚æœæˆ‘ä»¬ä¿®æ”¹äº†point2çš„å†…å®¹ï¼Œæˆ‘ä»¬ä¼šå‘ç°point1çš„å†…å®¹å¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">point2.x = <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(point2.x) <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">print</span>(point1.x) <span class="comment">// 0, å¯¹point2çš„ä¿®æ”¹ä¸ä¼šå½±å“point1çš„å†…å®¹</span></span><br></pre></td></tr></table></figure><h4 id="2-å¼•ç”¨ç±»å‹ä¼ é€’"><a href="#2-å¼•ç”¨ç±»å‹ä¼ é€’" class="headerlink" title="2.å¼•ç”¨ç±»å‹ä¼ é€’"></a>2.å¼•ç”¨ç±»å‹ä¼ é€’</h4><p>å€¼ç±»å‹åœ¨ä¼ é€’çš„è¿‡ç¨‹ä¸­ä¼šè¿›è¡Œæ•°æ®çš„copyï¼Œé‚£ä¹ˆæ˜¾è€Œæ˜“è§çš„æ˜¯ä¸‹é¢æ”¹å˜xçš„å€¼æ˜¯ä¸ä¼šæˆåŠŸçš„ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">10</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">changeX</span><span class="params">(x: Int)</span></span> &#123;</span><br><span class="line">    x + = <span class="number">10</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">changeX(x)</span><br><span class="line"><span class="built_in">print</span>(x) <span class="comment">// 10 xçš„å€¼ä¸ä¼šå‘ç”Ÿæ”¹å˜</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬å¸Œæœ›xçš„å€¼å¯ä»¥è¢«æ”¹å˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¿…é¡»ä½¿ç”¨å¼•ç”¨çš„æ–¹å¼æ¥ä¼ é€’xã€‚è¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨inoutï¼Œå½“æˆ‘ä»¬ä½¿ç”¨inoutçš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¸è®ºå½“å‰structçš„å­˜æ”¾çŠ¶æ€å¦‚ä½•ï¼Œéƒ½ä¸€å®šä¼šæŠŠç»“æ„ä½“æ”¾å…¥ä¸€ä¸ªè¿ç»­çš„å†…å­˜ç©ºé—´ä¸­ï¼Œå¹¶å°†åœ°å€ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">10</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">changeX</span><span class="params">(x: inOut Int)</span></span> &#123; <span class="comment">// swift3.0æ”¹å˜äº†inOutä¿®é¥°ç¬¦çš„ä½ç½®</span></span><br><span class="line">    x + = <span class="number">10</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">changeX(x)</span><br><span class="line"><span class="built_in">print</span>(x) <span class="comment">// 20 xçš„å€¼å‘ç”Ÿäº†æ”¹å˜</span></span><br></pre></td></tr></table></figure><h3 id="è¡¥å……ä¿®æ­£ğŸ‘‡å–µç¥è¯´çš„ï¼š"><a href="#è¡¥å……ä¿®æ­£ğŸ‘‡å–µç¥è¯´çš„ï¼š" class="headerlink" title="è¡¥å……ä¿®æ­£ğŸ‘‡å–µç¥è¯´çš„ï¼š"></a>è¡¥å……ä¿®æ­£ğŸ‘‡å–µç¥è¯´çš„ï¼š</h3><p>â€œå¦‚æœä½ å¯¹ Swift çš„å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„åŒºåˆ«æœ‰æ‰€äº†è§£çš„è¯ï¼Œä¼šçŸ¥é“ Int å…¶å®æ˜¯ä¸€ä¸ªå€¼ç±»å‹ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½ç›´æ¥ä¿®æ”¹å®ƒçš„åœ°å€æ¥è®©å®ƒæŒ‡å‘æ–°çš„å€¼ã€‚é‚£ä¹ˆè¿™é‡Œè¿™ç§ç±»ä¼¼ C ä¸­å–åœ°å€çš„ &amp; ç¬¦å·åˆ°åº•åšäº†é¢ä»€ä¹ˆï¼Ÿå¯¹äºå€¼ç±»å‹æ¥è¯´ï¼Œinout ç›¸å½“äºåœ¨å‡½æ•°å†…éƒ¨åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å€¼ï¼Œç„¶ååœ¨å‡½æ•°è¿”å›æ—¶å°†è¿™ä¸ªå€¼èµ‹ç»™ &amp; ä¿®é¥°çš„å˜é‡ï¼Œè¿™ä¸å¼•ç”¨ç±»å‹çš„è¡Œä¸ºæ˜¯ä¸åŒçš„ã€‚â€</p><p>æ‘˜å½•æ¥è‡ª: ç‹å· (onevcat). â€œSwifter - Swift å¿…å¤‡ Tips (ç¬¬ä¸‰ç‰ˆ)â€ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ä»Šå¤©çªç„¶çœ‹åˆ°inoutå…³é”®å­—soäº†è§£äº†ä¸€ä¸‹å…¶ç”¨æ³•&lt;br&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="inout" scheme="http://yoursite.com/tags/inout/"/>
    
  </entry>
  
  <entry>
    <title>SwiftåŒæ­¥ç½‘ç»œè¯·æ±‚(ä¿¡å·é‡)</title>
    <link href="http://yoursite.com/2018/05/04/Swift%E5%90%8C%E6%AD%A5%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82(%E4%BF%A1%E5%8F%B7%E9%87%8F)/"/>
    <id>http://yoursite.com/2018/05/04/SwiftåŒæ­¥ç½‘ç»œè¯·æ±‚(ä¿¡å·é‡)/</id>
    <published>2018-05-04T01:58:16.000Z</published>
    <updated>2018-05-04T02:13:03.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä»Šå¤©æœ‰ä¸ªéœ€æ±‚ï¼Œæˆ‘ä»¬çš„ç™»å½•è¿”å›çš„Tokenä¸¤ä¸ªå°æ—¶è¿‡æœŸï¼Œå› æ­¤æ¯æ¬¡ä½¿ç”¨Tokençš„æ—¶å€™éœ€è¦æ£€æµ‹Tokenæ˜¯å¦è¿‡æœŸï¼Œè¿‡æœŸå‘è¯·æ±‚åˆ·æ–°Tokenåï¼Œå†ä½¿ç”¨Tokenè¿›è¡Œæ•°æ®è¯·æ±‚ã€‚å› ä¸ºåˆ·æ–°Tokenä½¿ç”¨çš„æ˜¯å¼‚æ­¥è¯·æ±‚ï¼Œæœ‰æ—¶å€™è¿˜æ²¡æœ‰åˆ·æ–°å®Œæˆï¼Œå°±è¿›è¡Œäº†æ•°æ®è¯·æ±‚ï¼Œå¯¼è‡´è¯·æ±‚æ•°æ®å¤±è´¥ã€‚å› æ­¤åˆ·æ–°Tokençš„ç½‘ç»œè¯·æ±‚éœ€æ”¹ä¸ºåŒæ­¥è¯·æ±‚ã€‚<br><a id="more"></a></p></blockquote><p>ä»¥å‰é€šè¿‡<code>NSURLConnection.sendSynchronousRequest()</code>æ–¹æ³•èƒ½åŒæ­¥è¯·æ±‚æ•°æ®ã€‚ä»<code>iOS9</code>èµ·ï¼Œè‹¹æœåºŸé™¤<code>NSURLConnection</code>ï¼Œä½¿ç”¨<code>URLSession</code>ä»£æ›¿ <code>NSURLConnection</code>ã€‚</p><p>ä½¿ç”¨<code>URLSession</code>è¿›è¡ŒåŒæ­¥è¯·æ±‚ï¼Œå¯ä»¥ä½¿ç”¨ä¿¡å·é‡ã€‚<br>åˆ›å»ºä¸€ä¸ªé»˜è®¤å€¼ä¸º0çš„ä¿¡å·é‡ï¼Œåœ¨è°ƒç”¨ç½‘ç»œè¯·æ±‚çš„å¼‚æ­¥æ–¹æ³•åå°±ä¹‹è¡Œ<code>wait()</code>ï¼Œå› æ­¤è¿™ä¸ªæ–¹æ³•ä¼šä¸€ç›´ç­‰å¾…ï¼Œ åœ¨ç½‘ç»œè¯·æ±‚çš„<code>block</code>è¿”å›æ—¶ä¹‹è¡Œ<code>signal()</code>ï¼Œè¿™æ—¶æ‰ä»£è¡¨è¿™ä¸ªæ–¹æ³•ç»“æŸé˜»å¡ï¼Œå¯ä»¥ç»§ç»­æ‰§è¡Œäº†ã€‚</p><p>Swiftä¿¡å·é‡æ“ä½œå¦‚ä¸‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºåˆå§‹å€¼ä¸º0çš„ä¿¡å·é‡ï¼Œè¿™æ—¶ä»£è¡¨æ˜¯çº¢ç¯</span></span><br><span class="line"><span class="keyword">let</span> semaphore = <span class="type">DispatchSemaphore</span>(value: <span class="number">0</span>)</span><br><span class="line"><span class="comment">//è®©ä¿¡å·é‡ -1ï¼Œæ¯”å¦‚é»˜è®¤å€¼æ—¶0ï¼Œ wait()ä»¥åå°±å˜æˆäº†ï¼1äº†ï¼Œå› æ­¤ä¼šç­‰å¾…</span></span><br><span class="line">semaphore.wait()</span><br><span class="line"><span class="comment">// ä¿¡å·é‡+1ï¼Œå½“&gt;0æ—¶å°±ä»£è¡¨ç»¿ç¯å¯ä»¥èµ°äº†</span></span><br><span class="line">semaphore.signal()</span><br></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> urlString:<span class="type">String</span> = <span class="type">NewLogin_BaseUrl</span> + <span class="type">Login</span>.refreshToken.path</span><br><span class="line"><span class="keyword">let</span> url = <span class="type">URL</span>(string:urlString)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> request = <span class="type">URLRequest</span>(url: url!)</span><br><span class="line">request.httpMethod = <span class="string">"POST"</span></span><br><span class="line">request.httpBody = <span class="string">"Refresh_token=<span class="subst">\(k_Refresh_token)</span>"</span>.data(using: .utf8)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºåˆå§‹å€¼ä¸º0çš„ä¿¡å·é‡</span></span><br><span class="line"><span class="keyword">let</span> semaphore = <span class="type">DispatchSemaphore</span>(value: <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> session = <span class="type">URLSession</span>.shared</span><br><span class="line"><span class="keyword">let</span> dataTask = session.dataTask(with: request, completionHandler: &#123;(data, response, error) -&gt; <span class="type">Void</span> <span class="keyword">in</span></span><br><span class="line">                                            </span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> data = data &#123;</span><br><span class="line">                </span><br><span class="line">       <span class="keyword">if</span> <span class="keyword">let</span> result = <span class="keyword">try</span>? <span class="type">JSONSerialization</span>.jsonObject(with: data, options: .allowFragments) &#123;</span><br><span class="line">                        </span><br><span class="line">       <span class="built_in">print</span>(result)                 </span><br><span class="line">                                        </span><br><span class="line">       <span class="keyword">guard</span> <span class="keyword">let</span> <span class="type">Tmodel</span>:<span class="type">YXNewLoginModel</span> = <span class="type">Mapper</span>&lt;<span class="type">YXNewLoginModel</span>&gt;().<span class="built_in">map</span>(<span class="type">JSON</span>:result <span class="keyword">as</span>! [<span class="type">String</span> : <span class="type">Any</span>]) <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">                    </span><br><span class="line">        <span class="keyword">if</span> <span class="type">Tmodel</span>.<span class="type">Success</span> == <span class="literal">true</span> &#123;</span><br><span class="line">                        </span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> content = <span class="type">Tmodel</span>.<span class="type">Content</span> <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">                        </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> <span class="type">Access_token</span> = content.<span class="type">Access_token</span>, <span class="keyword">let</span> <span class="type">Refresh_token</span> = content.<span class="type">Refresh_token</span> &#123;</span><br><span class="line">                            </span><br><span class="line">           <span class="keyword">if</span> <span class="type">Access_token</span> == <span class="string">"-1"</span> &#123;</span><br><span class="line">                                </span><br><span class="line">              <span class="type">HQ_rootVC</span>?.noticeOnlyText(<span class="string">"åˆ·æ–°Tokenå‡ºé”™ -1"</span>)</span><br><span class="line">                                </span><br><span class="line">           &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                                </span><br><span class="line">              <span class="type">Uds</span>.<span class="keyword">set</span>(<span class="type">Access_token</span>, forKey: <span class="string">"k_Access_token"</span>)</span><br><span class="line">              <span class="type">Uds</span>.synchronize()</span><br><span class="line">              <span class="type">Uds</span>.<span class="keyword">set</span>(<span class="type">Refresh_token</span>, forKey: <span class="string">"k_Refresh_token"</span>)</span><br><span class="line">              <span class="type">Uds</span>.synchronize()</span><br><span class="line">                                </span><br><span class="line">              <span class="keyword">let</span> date = <span class="type">Date</span>()</span><br><span class="line">              <span class="type">Uds</span>.<span class="keyword">set</span>(date, forKey: <span class="string">"k_StartTime"</span>)</span><br><span class="line">              <span class="type">Uds</span>.synchronize()</span><br><span class="line">            &#125;</span><br><span class="line">                            </span><br><span class="line">         &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">HQ_rootVC</span>?.noticeOnlyText(<span class="string">"åˆ·æ–°Access_tokenå‡ºé”™"</span>)</span><br><span class="line">         &#125;</span><br><span class="line">         </span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                </span><br><span class="line">          <span class="type">HQ_rootVC</span>?.noticeOnlyText(<span class="string">"åˆ·æ–°Access_tokenå‡ºé”™"</span>)</span><br><span class="line">          <span class="keyword">guard</span> <span class="keyword">let</span> error = error <span class="keyword">else</span> &#123;<span class="keyword">return</span>&#125;</span><br><span class="line">          <span class="built_in">print</span>(error)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      semaphore.signal()</span><br><span class="line">            </span><br><span class="line">&#125;) <span class="keyword">as</span> <span class="type">URLSessionTask</span></span><br><span class="line">        </span><br><span class="line">dataTask.resume()</span><br><span class="line">        </span><br><span class="line"><span class="number">_</span> = semaphore.wait(timeout: <span class="type">DispatchTime</span>.distantFuture)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"åˆ·æ–°å®Œæ¯•ï¼<span class="subst">\(k_Access_token)</span>"</span>)</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœ</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="type">Content</span> =     &#123;</span><br><span class="line">        <span class="string">"Access_token"</span> = 5a74e75c69934c29bed444d9c932a0ac;</span><br><span class="line">        <span class="string">"Expires_in"</span> = <span class="number">7200</span>;</span><br><span class="line">        <span class="string">"Refresh_token"</span> = 3d88a290cce6475f8ab22d07c971a82f;</span><br><span class="line">        <span class="string">"Token_type"</span> = <span class="string">"&lt;null&gt;"</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="type">Message</span> = <span class="string">""</span>;</span><br><span class="line">    <span class="type">Success</span> = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">åˆ·æ–°å®Œæ¯•ï¼5a74e75c69934c29bed444d9c932a0ac</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ä»Šå¤©æœ‰ä¸ªéœ€æ±‚ï¼Œæˆ‘ä»¬çš„ç™»å½•è¿”å›çš„Tokenä¸¤ä¸ªå°æ—¶è¿‡æœŸï¼Œå› æ­¤æ¯æ¬¡ä½¿ç”¨Tokençš„æ—¶å€™éœ€è¦æ£€æµ‹Tokenæ˜¯å¦è¿‡æœŸï¼Œè¿‡æœŸå‘è¯·æ±‚åˆ·æ–°Tokenåï¼Œå†ä½¿ç”¨Tokenè¿›è¡Œæ•°æ®è¯·æ±‚ã€‚å› ä¸ºåˆ·æ–°Tokenä½¿ç”¨çš„æ˜¯å¼‚æ­¥è¯·æ±‚ï¼Œæœ‰æ—¶å€™è¿˜æ²¡æœ‰åˆ·æ–°å®Œæˆï¼Œå°±è¿›è¡Œäº†æ•°æ®è¯·æ±‚ï¼Œå¯¼è‡´è¯·æ±‚æ•°æ®å¤±è´¥ã€‚å› æ­¤åˆ·æ–°Tokençš„ç½‘ç»œè¯·æ±‚éœ€æ”¹ä¸ºåŒæ­¥è¯·æ±‚ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="ä¿¡å·é‡" scheme="http://yoursite.com/tags/%E4%BF%A1%E5%8F%B7%E9%87%8F/"/>
    
  </entry>
  
  <entry>
    <title>iOSä¸­cookieçš„ä½¿ç”¨</title>
    <link href="http://yoursite.com/2018/03/20/iOS%E4%B8%ADcookie%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <id>http://yoursite.com/2018/03/20/iOSä¸­cookieçš„ä½¿ç”¨/</id>
    <published>2018-03-20T06:04:43.000Z</published>
    <updated>2018-03-20T06:55:05.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä»Šå¤©è€å¤§ç»™äº†ä¸ªéœ€æ±‚æŠŠçŸ¥ç½‘ç ”å­¦å¹³å°çš„ä¿®æ”¹ä¸ªäººè´¦æˆ·å¯†ç çš„åŠŸèƒ½æ”¾åˆ°ç§»åŠ¨ç«¯ï¼Œæ¥å£è®©æˆ‘ä»webç«¯æŠ“å–çš„ã€‚æ¶‰åŠåˆ°cookieæ–¹é¢çš„çŸ¥è¯†ã€‚soåˆç ”ç©¶äº†ä¸€ä¸‹iOSä¸­HTTPçš„cookieç›¸å…³å†…å®¹ã€‚<br><a id="more"></a></p></blockquote><h4 id="ä¸€ã€cookieåŸºæœ¬ä»‹ç»"><a href="#ä¸€ã€cookieåŸºæœ¬ä»‹ç»" class="headerlink" title="ä¸€ã€cookieåŸºæœ¬ä»‹ç»"></a>ä¸€ã€cookieåŸºæœ¬ä»‹ç»</h4><ol><li><p>Cookieæ˜¯åœ¨å®¢æˆ·ç«¯å­˜å‚¨æœåŠ¡å™¨çŠ¶æ€çš„ä¸€ç§æœºåˆ¶,WebæœåŠ¡å™¨å¯ä»¥é€šè¿‡<code>Set-Cookie</code>æˆ–è€…<code>Set-Cookie2</code> HTTPå¤´éƒ¨è®¾ç½®Cookieã€‚</p></li><li><p>Cookieæ˜¯ç”±æœåŠ¡å™¨ç«¯ç”Ÿæˆï¼Œå‘é€ç»™<code>User-Agent</code>ï¼ˆä¸€èˆ¬æ˜¯æµè§ˆå™¨æˆ–è€…å®¢æˆ·ç«¯ï¼‰ï¼Œæµè§ˆå™¨ä¼šå°†Cookieçš„<code>key/value</code>ä¿å­˜åˆ°æŸä¸ªç›®å½•ä¸‹çš„æ–‡æœ¬æ–‡ä»¶å†…ï¼Œä¸‹æ¬¡è¯·æ±‚åŒä¸€ç½‘ç«™åœ°å€æ—¶å°±å‘é€è¯¥Cookieç»™æœåŠ¡å™¨ã€‚</p></li><li><p>cookieå°±åƒæœåŠ¡å™¨ç»™ç”¨æˆ·è´´çš„æ ‡ç­¾ï¼Œç”¨æˆ·è®¿é—®ä¸€ä¸ªwebç«™ç‚¹çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨å°±å¯ä»¥é€šè¿‡è¿™ä¸ªæ ‡ç­¾æ¥è¯†åˆ«æ˜¯å“ªä¸€ä¸ªç”¨æˆ·ã€‚<br>cookieä¸­åŒ…å«äº†ä¸€ä¸ªæœ‰åå­—=å€¼<code>ï¼ˆname=valueï¼‰</code>è¿™æ ·çš„ä¿¡æ¯æ„æˆçš„ä»»æ„åˆ—è¡¨ï¼Œå¹¶é€šè¿‡<code>Set-Cookie</code>æˆ–<code>Set-Cookie2</code> Httpå“åº”ï¼ˆæ‰©å±•ï¼‰çš„headeræ¥è®¾ç½®æ ‡ç­¾ã€‚</p></li><li><p>cookeå¯ä»¥åŒ…å«ä»»æ„ä¿¡æ¯ï¼Œä½†ä»–ä»¬é€šå¸¸éƒ½åªåŒ…å«ä¸€ä¸ªæœåŠ¡å™¨ä¸ºäº†è¿›è¡Œè¿½è¸ªè€Œäº§ç”Ÿçš„ç‹¬ç‰¹çš„è¯†åˆ«ç ã€‚</p></li><li><p>æµè§ˆå™¨ä¼šè®°ä½ä»æœåŠ¡å™¨è¿”å›çš„<code>Set-Cookie</code>æˆ–<code>Set-Cookie2</code> <code>header</code>ä¸­çš„cookieå†…å®¹ï¼Œå¹¶å°†cookieé›†å­˜å‚¨åœ¨æµè§ˆå™¨çš„cookieæ•°æ®åº“ä¸­<strong>ï¼ˆioså®¢æˆ·ç«¯æ˜¯å­˜åœ¨appçš„library/cookieæ²™ç›’ç›®å½•ä¸‹ï¼‰</strong>ã€‚å°†æ¥ç”¨æˆ·è®¿é—®ç»Ÿä¸€ç«™ç‚¹æ—¶ï¼Œæµè§ˆå™¨ä¼šé€‰ä¸­é‚£ä¸ªæœåŠ¡å™¨è´´åˆ°ç”¨æˆ·ä¸Šçš„é‚£äº›cookie,å¹¶è¯·æ±‚çš„headerä¸­å°†èµ·ä¼ ç»™æœåŠ¡å™¨ã€‚</p></li></ol><h4 id="äºŒã€iOSä¸­Httpè¯·æ±‚å¯¹cookieçš„é»˜è®¤å¤„ç†ï¼š"><a href="#äºŒã€iOSä¸­Httpè¯·æ±‚å¯¹cookieçš„é»˜è®¤å¤„ç†ï¼š" class="headerlink" title="äºŒã€iOSä¸­Httpè¯·æ±‚å¯¹cookieçš„é»˜è®¤å¤„ç†ï¼š"></a>äºŒã€iOSä¸­Httpè¯·æ±‚å¯¹cookieçš„é»˜è®¤å¤„ç†ï¼š</h4><ol><li><p>ä¸€ç›´ä»¥ä¸ºiosçš„httpè¯·æ±‚ä¸ä¼šè‡ªåŠ¨å¤„ç†è¯·æ±‚ä¸­çš„<br>cookieï¼Œæ‰€ä»¥ä¸€ç›´è®¤ä¸ºå®¢æˆ·ç«¯è¯·æ±‚é»˜è®¤æ˜¯æ²¡æœ‰Sessionçš„ï¼Œç°åœ¨å‘ç°è‡ªå·±çš„æƒ³æ³•é”™äº†å¾ˆä¹…ã€‚</p></li><li><p><code>NSURLRequest</code>é»˜è®¤çš„å¤„ç†è¿‡ç¨‹ï¼šç±»ä¼¼äºæœåŠ¡å™¨ç«¯å’Œç½‘é¡µç«¯çš„sessionï¼Œå…¶å®<code>NSURLRequest</code>å·²ç»åšäº†æµè§ˆå™¨åšçš„åŠ¨ä½œï¼Œå¸®ä½ å¤„ç†äº†Cookieã€‚å½“ä½ è®¿é—®ä¸€ä¸ªé“¾æ¥æ—¶ï¼Œ<code>NSURLRequest</code>ä¼šå¸®ä½ ä¸»åŠ¨è®°å½•ä¸‹æ¥ä½ è®¿é—®ç«™ç‚¹çš„cookieï¼Œè€Œä¸”å½“ä½ ä¸‹æ¬¡å†è®¿é—®è¿™ä¸ªç«™ç‚¹æ—¶ï¼Œ<code>NSURLRequest</code>ä¼šæ‹¿ç€ä¸Šæ¬¡ä¿å­˜ä¸‹æ¥äº†çš„cookieç»§ç»­å»è¯·æ±‚ã€‚</p></li><li><p>æ‰€ä»¥å¦‚æœæœåŠ¡å™¨ç«¯ä½¿ç”¨äº†sessionï¼Œioså®¢æˆ·ç«¯ä½¿ç”¨Httpè¯·æ±‚ï¼Œé»˜è®¤å°±æ˜¯å·²ç»æœ‰äº†sessionçš„ã€‚</p></li><li><p><code>NSURLRequest</code>çš„ä¸€ä¸ªå±æ€§ï¼Œ<code>HTTPShouldHandleCookies</code>ï¼Œè¡¨ç¤ºHttpè¯·æ±‚æ˜¯å¦è‡ªåŠ¨å¤„ç†Cookieï¼Œé»˜è®¤å€¼ä¸º<code>YES</code>ã€‚</p></li></ol><h4 id="äºŒã€cookieçš„è¯»å†™ï¼š"><a href="#äºŒã€cookieçš„è¯»å†™ï¼š" class="headerlink" title="äºŒã€cookieçš„è¯»å†™ï¼š"></a>äºŒã€cookieçš„è¯»å†™ï¼š</h4><ol><li><p>å‡å¦‚æˆ‘ä»¬æƒ³è‡ªå·±å¯¹Cookieåšä¸€äº›å¤„ç†ï¼Œæˆ‘ä»¬å¦‚ä½•è¯»å†™httpè¯·æ±‚ä¸­çš„cookieå‘¢ï¼Ÿåœ¨<code>Foundation</code>ç±»åº“ä¸­ï¼Œæœ‰ä¸¤ä¸ªé‡è¦çš„ç›¸å…³çš„ç±»ï¼š<code>HTTPCookieStorage</code>å’Œ<code>HTTPCookie</code>ã€‚</p></li><li><p><code>HTTPCookieStorage</code>æ˜¯ä¸€ä¸ªç®¡ç†Httpè¯·æ±‚ä¸­cookieçš„å•ä¾‹ç±»ï¼Œå®ƒä¼šåœ¨ä¸€ä¸ªå…¨å±€èŒƒå›´å†…ç®¡ç†Cookieï¼Œåœ¨iOSä¸­ï¼Œcookieä¼šé™åˆ¶åœ¨ä¸€ä¸ªåº”ç”¨çš„èŒƒå›´å†…ã€‚å¯ä»¥é€šè¿‡è¿™ä¸ªç±»æ¥è¯»å†™Cookieã€‚</p><ul><li><p>è·å–å•ä¾‹</p> <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">var</span> <span class="title">shared</span>: <span class="title">HTTPCookieStorage</span> </span>&#123; <span class="keyword">get</span> &#125;</span><br></pre></td></tr></table></figure></li><li><p>è·å–cookie</p>  <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å½“å‰å­˜å‚¨çš„æ‰€æœ‰cookie </span></span><br><span class="line"><span class="keyword">var</span> cookies: [<span class="type">HTTPCookie</span>]? </span><br><span class="line"><span class="comment">//é’ˆå¯¹ç‰¹å®šURLçš„cookie </span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">cookies</span><span class="params">(<span class="keyword">for</span> URL: URL)</span></span> -&gt; [<span class="type">HTTPCookie</span>]? </span><br><span class="line"><span class="comment">// å¯¹å­˜å‚¨çš„cookieè¿›è¡Œæ’åº</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sortedCookies</span><span class="params">(using sortOrder: [NSSortDescriptor])</span></span> -&gt; [<span class="type">HTTPCookie</span>]</span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ /åˆ é™¤cookie</p>  <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ é™¤cookie</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">deleteCookie</span><span class="params">(HTTPCookie)</span></span></span><br><span class="line"><span class="comment">// å¦‚æœcookieæ¥å—ç­–ç•¥è®¸å¯ï¼Œåˆ™å°†cookieå­˜å‚¨åœ¨cookieå­˜å‚¨åŒºä¸­ã€‚ </span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">setCookie</span><span class="params">(HTTPCookie)</span></span></span><br><span class="line"><span class="comment">// å¦‚æœæ¥æ”¶æ–¹çš„cookieæ¥å—ç­–ç•¥å…è®¸ï¼Œåˆ™å‘æ¥æ”¶å™¨æ·»åŠ ä¸€ä¸ªcookieæ•°ç»„ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">setCookies</span><span class="params">([HTTPCookie], <span class="keyword">for</span>: URL?, mainDocumentURL: URL?)</span></span></span><br></pre></td></tr></table></figure></li><li><p>æ”¹å˜cookieæ¥æ”¶ç­–ç•¥</p>  <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cookieAcceptPolicy: <span class="type">HTTPCookie</span>.<span class="type">AcceptPolicy</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">AcceptPolicy</span> : <span class="title">UInt</span> </span>&#123;</span><br><span class="line"><span class="keyword">case</span> always <span class="comment">// æ¥æ”¶æ‰€æœ‰cookie,é»˜è®¤ç­–ç•¥.</span></span><br><span class="line"><span class="keyword">case</span> never <span class="comment">// æ‹’ç»æ‰€æœ‰cookie</span></span><br><span class="line"><span class="keyword">case</span> onlyFromMainDocumentDomain <span class="comment">// åªæ¥æ”¶main document domainä¸­çš„cookie.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>é€šçŸ¥ç›¸å…³</p>  <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å½“HTTPCookieStorageå®ä¾‹ä¸­çš„cookieså˜åŒ–æ—¶å‘å‡ºæ­¤é€šçŸ¥ã€‚</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">let</span> <span class="type">NSHTTPCookieManagerCookiesChanged</span>: <span class="type">NSNotification</span>.<span class="type">Name</span></span><br><span class="line"><span class="comment">// å½“NSHTTPCookieStorageå®ä¾‹çš„cookie acceptance policyå˜åŒ–æ—¶å‘å‡ºæ­¤é€šçŸ¥ã€‚</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">let</span> <span class="type">NSHTTPCookieManagerAcceptPolicyChanged</span>: <span class="type">NSNotification</span>.<span class="type">Name</span></span><br></pre></td></tr></table></figure></li><li><p>æ‰‹åŠ¨è®¾ç½®cookies</p>  <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‰‹åŠ¨è®¾ç½®cookieï¼ˆä¸ä¼šæŒä¹…åŒ–åˆ°æ²™ç›’ Library/Cookiesç›®å½•ï¼‰ </span></span><br><span class="line"><span class="keyword">var</span> cookieProperties = [<span class="type">HTTPCookiePropertyKey</span> : <span class="type">Any</span>]()</span><br><span class="line">cookieProperties[<span class="type">HTTPCookiePropertyKey</span>.name] = <span class="string">"username"</span></span><br><span class="line">cookieProperties[<span class="type">HTTPCookiePropertyKey</span>.value] = <span class="string">"my cookie"</span></span><br><span class="line">cookieProperties[<span class="type">HTTPCookiePropertyKey</span>.domain] = <span class="string">"localhost"</span></span><br><span class="line">cookieProperties[<span class="type">HTTPCookiePropertyKey</span>.originURL] = <span class="string">"localhost"</span></span><br><span class="line">cookieProperties[<span class="type">HTTPCookiePropertyKey</span>.path] = <span class="string">"/"</span></span><br><span class="line">cookieProperties[<span class="type">HTTPCookiePropertyKey</span>.version] = <span class="string">"0"</span></span><br><span class="line">cookieProperties[<span class="type">HTTPCookiePropertyKey</span>.port] = <span class="number">8181</span></span><br><span class="line">cookieProperties[<span class="type">HTTPCookiePropertyKey</span>.expires] = <span class="type">Date</span>(timeIntervalSinceNow: <span class="number">60</span> * <span class="number">60</span>)</span><br><span class="line">cookieProperties[<span class="type">HTTPCookiePropertyKey</span>.discard] = <span class="number">0</span> <span class="keyword">let</span> cookie = <span class="type">HTTPCookie</span>(properties: cookieProperties)</span><br><span class="line"><span class="type">HTTPCookieStorage</span>.shared.setCookie(cookie!)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>HTTPCookieç±»ä»£è¡¨cookieå¯¹è±¡ï¼Œé€šè¿‡å†…ç½®çš„ä¸€äº›keyï¼Œæˆ‘ä»¬å¯ä»¥åˆæˆCookieå¯¹è±¡ï¼Œç„¶åå†™å…¥<code>HTTPCookieStorage</code>ä¸­ï¼Œä¹Ÿå¯ä»¥ä»<code>HTTPCookieStorage</code>ä¸­è¯»å–å‡ºå­˜åœ¨çš„æ‰€æœ‰<code>HTTPCookie</code>ã€‚</p><ul><li><p>åˆ›å»ºcookie</p><ul><li><p>æ ¹æ®URLä»å“åº”å¯¹è±¡çš„<code>headerFileds</code>ä¸­è¯»å–åˆ°Cooki<code>ç›¸å…³å†…å®¹,ç”Ÿæˆ</code>NSHTTPCookie`å®ä¾‹å¯¹è±¡æ•°ç»„ã€‚</p>  <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯¥æ–¹æ³•ä¼šå¿½ç•¥headerFiledsä¸­ä¸cookieæ— å…³çš„å­—æ®µï¼Œ </span></span><br><span class="line"><span class="comment">// å¦‚æœheaderFiledsä¸­çš„cookieæ²¡æœ‰æŒ‡å®šdomain,åˆ™ä½¿ç”¨theURLçš„domain,å¦‚æœæ²¡æœ‰æŒ‡å®špath,åˆ™ä½¿ç”¨â€/â€. </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">cookies</span>(<span class="title">withResponseHeaderFields</span>: [<span class="title">String</span> : <span class="title">String</span>], <span class="title">for</span>: <span class="title">URL</span>)</span></span><br></pre></td></tr></table></figure></li><li><p>ç”¨ç»™å®šçš„å±æ€§ç”Ÿæˆcookieå¯¹è±¡</p>  <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">init</span>?(properties: [<span class="type">HTTPCookiePropertyKey</span> : <span class="type">Any</span>])</span><br></pre></td></tr></table></figure></li></ul></li><li><p>è½¬æ¢cookieä¸º <code>request headers</code></p><ul><li><p>è¿”å›ä¸€ä¸ªå­—å…¸ï¼Œé€šè¿‡<code>setValue(_:forHTTPHeaderField:)</code>æ–¹æ³•è®¾ç½®è¿”å›çš„å­—å…¸åˆ°requestã€‚ç„¶åå‘é€ç»™æœåŠ¡å™¨ã€‚</p>  <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">requestHeaderFields</span>(<span class="title">with</span> <span class="title">cookies</span>: [<span class="title">HTTPCookie</span>]) -&gt; [<span class="title">String</span> : <span class="title">String</span>]</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>cookieçš„å„ç§å±æ€§</p>  <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// cookieçš„æ³¨é‡Šï¼Œè¯´æ˜cookirçš„ç”¨é€”å’Œç›®çš„ </span></span><br><span class="line"><span class="keyword">var</span> comment: <span class="type">String</span>? </span><br><span class="line"><span class="comment">// æ³¨é‡Šçš„é“¾æ¥ï¼Œè¿›ä¸€æ­¥è¯´æ˜Cookie </span></span><br><span class="line"><span class="keyword">var</span> commentURL: <span class="type">URL</span>? </span><br><span class="line"><span class="comment">// cookieæ‰€å±çš„åŸŸ </span></span><br><span class="line"><span class="keyword">var</span> domain: <span class="type">String</span> </span><br><span class="line"><span class="comment">// è¿‡æœŸæ—¶é—´ </span></span><br><span class="line"><span class="keyword">var</span> expiresDate: <span class="type">Date</span>? </span><br><span class="line"><span class="comment">// æ˜¯å¦å‘é€ç»™httpæœåŠ¡å™¨ </span></span><br><span class="line"><span class="keyword">var</span> isHTTPOnly: <span class="type">Bool</span> </span><br><span class="line"><span class="comment">// cookieæ˜¯å¦é€šè¿‡sslå®‰å…¨é“¾æ¥å‘é€ </span></span><br><span class="line"><span class="keyword">var</span> isSecure: <span class="type">Bool</span> </span><br><span class="line"><span class="comment">// åœ¨ä¼šè¯ç»“æŸçš„æ—¶å€™æ˜¯å¦ç§»é™¤cookie(ä¸è€ƒè™‘å®ƒçš„è¿‡æœŸæ—¶é—´) </span></span><br><span class="line"><span class="keyword">var</span> isSessionOnly: <span class="type">Bool</span> </span><br><span class="line"><span class="comment">// cookieå </span></span><br><span class="line"><span class="keyword">var</span> name: <span class="type">String</span> </span><br><span class="line"><span class="comment">//cookieå°†åœ¨cookieåŸŸä¸­å‘é€æ­¤è·¯å¾„çš„è¯·æ±‚ï¼Œä»¥åŠæ‰€æœ‰å…·æœ‰æ­¤å‰ç¼€çš„è·¯å¾„ã€‚â€œ/â€è·¯å¾„æ„å‘³ç€cookieå°†è¢«å‘é€åˆ°åŸŸä¸­çš„æ‰€æœ‰URLã€‚ </span></span><br><span class="line"><span class="keyword">var</span> path: <span class="type">String</span> </span><br><span class="line"><span class="comment">// cookiesçš„æ‰€ä»¥ç«¯å£ </span></span><br><span class="line"><span class="keyword">var</span> portList: [<span class="type">NSNumber</span>]? </span><br><span class="line"><span class="comment">// cookieçš„æ‰€ä»¥å±æ€§ var properties: [HTTPCookiePropertyKey : Any]? </span></span><br><span class="line"><span class="comment">// å€¼ var value: String </span></span><br><span class="line"><span class="comment">// cookieçš„ç‰ˆæœ¬ 0æˆ–è€…1 var version: Int</span></span><br></pre></td></tr></table></figure></li></ul></li></ol><h4 id="å››ã€æ€»ç»“"><a href="#å››ã€æ€»ç»“" class="headerlink" title="å››ã€æ€»ç»“"></a>å››ã€æ€»ç»“</h4><p>ä¼šè¯ï¼ˆSessionï¼‰è·Ÿè¸ªæ˜¯Webç¨‹åºä¸­å¸¸ç”¨çš„æŠ€æœ¯ï¼Œç”¨æ¥è·Ÿè¸ªç”¨æˆ·çš„æ•´ä¸ªä¼šè¯ã€‚å¸¸ç”¨çš„ä¼šè¯è·Ÿè¸ªæŠ€æœ¯æ˜¯Cookieä¸Sessionã€‚Cookieé€šè¿‡åœ¨å®¢æˆ·ç«¯è®°å½•ä¿¡æ¯ç¡®å®šç”¨æˆ·èº«ä»½ï¼ŒSessioné€šè¿‡åœ¨æœåŠ¡å™¨ç«¯è®°å½•ä¿¡æ¯ç¡®å®šç”¨æˆ·èº«ä»½ï¼Œåœ¨ç§»åŠ¨å¼€å‘ä¸­Cookieè¶Šæ¥è¶Šå¤šç”¨åˆ°äº†Cookie,è§‰å¾—æœ‰å¿…è¦å»å­¦ä¹ ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ä»Šå¤©è€å¤§ç»™äº†ä¸ªéœ€æ±‚æŠŠçŸ¥ç½‘ç ”å­¦å¹³å°çš„ä¿®æ”¹ä¸ªäººè´¦æˆ·å¯†ç çš„åŠŸèƒ½æ”¾åˆ°ç§»åŠ¨ç«¯ï¼Œæ¥å£è®©æˆ‘ä»webç«¯æŠ“å–çš„ã€‚æ¶‰åŠåˆ°cookieæ–¹é¢çš„çŸ¥è¯†ã€‚soåˆç ”ç©¶äº†ä¸€ä¸‹iOSä¸­HTTPçš„cookieç›¸å…³å†…å®¹ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="cookie" scheme="http://yoursite.com/tags/cookie/"/>
    
  </entry>
  
  <entry>
    <title>éªŒè¯iOSçš„é€šçŸ¥æœºåˆ¶æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥</title>
    <link href="http://yoursite.com/2018/02/28/%E9%AA%8C%E8%AF%81iOS%E7%9A%84%E9%80%9A%E7%9F%A5%E6%9C%BA%E5%88%B6%E6%98%AF%E5%90%8C%E6%AD%A5%E8%BF%98%E6%98%AF%E5%BC%82%E6%AD%A5/"/>
    <id>http://yoursite.com/2018/02/28/éªŒè¯iOSçš„é€šçŸ¥æœºåˆ¶æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥/</id>
    <published>2018-02-28T05:53:40.000Z</published>
    <updated>2018-02-28T06:08:16.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æ›¾ç»é¢è¯•çš„æ—¶å€™è¢«é—®åˆ°è¿‡çš„é¢è¯•é¢˜ï¼Œçªç„¶æƒ³èµ·æ¥äº†ï¼Œè®°å½•ä¸€ä¸‹ã€‚<br><a id="more"></a></p></blockquote><p>ä¸<code>JavaScript</code>ä¸­çš„äº‹ä»¶æœºåˆ¶ä¸åŒï¼Œ<code>iOS</code>é‡Œçš„äº‹ä»¶å¹¿æ’­æœºåˆ¶æ˜¯åŒæ­¥çš„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå¹¿æ’­ä¸€ä¸ªé€šçŸ¥ï¼Œä¼šé˜»å¡åé¢çš„ä»£ç ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-(<span class="keyword">void</span>) click  </span><br><span class="line">&#123;  </span><br><span class="line">    <span class="built_in">NSNotificationCenter</span> *center =  [<span class="built_in">NSNotificationCenter</span> defaultCenter];  </span><br><span class="line">    [center postNotificationName:<span class="string">@"event_happend"</span> object:<span class="keyword">self</span>];  </span><br><span class="line">          </span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"HQ1111"</span>);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŒ‰ä¸‹æŒ‰é’®åï¼Œå‘é€ä¸€ä¸ªå¹¿æ’­ï¼Œæ­¤å‰å·²ç»æ³¨å†Œäº†2ä¸ªæ­¤äº‹ä»¶çš„ä¾¦å¬è€…</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-(<span class="keyword">id</span>) init  </span><br><span class="line">&#123;  </span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];  </span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">self</span>)&#123;  </span><br><span class="line">        [[<span class="built_in">NSNotificationCenter</span> defaultCenter] addObserver:<span class="keyword">self</span> selector:<span class="keyword">@selector</span>(whenReceive:) name:<span class="string">@"event_happend"</span> object:<span class="literal">nil</span>];  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;  </span><br><span class="line">&#125;  </span><br><span class="line">        </span><br><span class="line">-(<span class="keyword">void</span>) whenReceive:(<span class="built_in">NSNotification</span>*) notification  </span><br><span class="line">&#123;  </span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"HQ2222"</span>);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-(<span class="keyword">id</span>) init  </span><br><span class="line">&#123;  </span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];  </span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">self</span>)&#123;  </span><br><span class="line">        [[<span class="built_in">NSNotificationCenter</span> defaultCenter] addObserver:<span class="keyword">self</span> selector:<span class="keyword">@selector</span>(whenReceive:) name:<span class="string">@"event_happend"</span> object:<span class="literal">nil</span>];  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;  </span><br><span class="line">&#125;  </span><br><span class="line">      </span><br><span class="line">-(<span class="keyword">void</span>) whenReceive:(<span class="built_in">NSNotification</span>*) notification  </span><br><span class="line">&#123;  </span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"HQ3333"</span>);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œè¿™æ®µä»£ç ï¼Œé¦–å…ˆä¼šè¾“å‡ºHQ2222ï¼Œç„¶åæ˜¯HQ3333ï¼Œæœ€åæ‰æ˜¯HQ1111ã€‚è°ƒè¯•å‘ç°ï¼Œä»£ç å§‹ç»ˆæ˜¯è·‘åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­ï¼ˆå¹¿æ’­äº‹ä»¶çš„çº¿ç¨‹ï¼‰ï¼Œå¹¿æ’­äº‹ä»¶ä¹‹åçš„ä»£ç è¢«é˜»å¡ï¼Œç›´åˆ°æ‰€æœ‰çš„ä¾¦å¬è€…éƒ½æ‰§è¡Œå®Œå“åº”</p><p>æ‰€ä»¥ï¼Œç”±äº<code>NotificationCenter</code>çš„è¿™ä¸ªç‰¹æ€§ï¼Œå¦‚æœå¸Œæœ›å¹¿æ’­çš„äº‹ä»¶å¼‚æ­¥å¤„ç†ï¼Œåˆ™éœ€è¦åœ¨ä¾¦å¬è€…çš„æ–¹æ³•é‡Œå¼€å¯æ–°çº¿ç¨‹ã€‚åº”è¯¥æŠŠ<code>Notification</code>ä½œä¸ºç»„ä»¶é—´è§£è€¦çš„æ–¹å¼ï¼Œè€Œä¸æ˜¯åˆ©ç”¨å®ƒæ¥å®ç°å¼‚æ­¥å¤„ç†ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;æ›¾ç»é¢è¯•çš„æ—¶å€™è¢«é—®åˆ°è¿‡çš„é¢è¯•é¢˜ï¼Œçªç„¶æƒ³èµ·æ¥äº†ï¼Œè®°å½•ä¸€ä¸‹ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
  </entry>
  
  <entry>
    <title>iOSè‡ªåŠ¨æ‰“åŒ…å‘å¸ƒ</title>
    <link href="http://yoursite.com/2018/02/28/iOS%E8%87%AA%E5%8A%A8%E6%89%93%E5%8C%85%E5%8F%91%E5%B8%83/"/>
    <id>http://yoursite.com/2018/02/28/iOSè‡ªåŠ¨æ‰“åŒ…å‘å¸ƒ/</id>
    <published>2018-02-28T01:25:51.000Z</published>
    <updated>2018-02-28T05:48:33.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æ¯æ¬¡æ›´æ–°é¡¹ç›®éƒ½è¦ç»™æµ‹è¯•äººå‘˜æ‰“åŒ…ï¼Œè¦ä¹ˆæŒ¨ä¸ªæµ‹è¯•æœºå®‰è£…ï¼Œè¦ä¹ˆå‘å¸ƒåˆ°è’²å…¬è‹±æˆ–è€…Firç­‰ç¬¬ä¸‰æ–¹æ‰˜ç®¡å¹³å°ï¼Œ<code>Product -&gt; Archive</code>ç¼–è¯‘æ‰“åŒ…,é€‰æ‹©<code>Organizer</code>,å¯¼å‡º<code>ad hoc</code>çš„<code>ipa</code>åŒ…ä¸Šä¼ ã€‚å¾ˆæ˜¯éº»çƒ¦ï¼Œå› æ­¤å†™ä¸ªè„šæœ¬è‡ªåŠ¨æ‰“åŒ…å‘å¸ƒã€‚</p></blockquote><a id="more"></a><h4 id="1-å‡†å¤‡å·¥ä½œ"><a href="#1-å‡†å¤‡å·¥ä½œ" class="headerlink" title="1.å‡†å¤‡å·¥ä½œ"></a>1.å‡†å¤‡å·¥ä½œ</h4><p>å½“æˆ‘ä»¬åœ¨<code>Xcode</code>ç‚¹å‡»äº†<code>build</code>æˆ–è€…è¿è¡Œ<code>comand+R</code>ä¹‹åï¼ŒXcodeè‡ªå·±æ‰§è¡Œçš„å‘½ä»¤æ˜¯<code>xcodebuild</code>è¿™æ¡å‘½ä»¤.ç¼–è¯‘å¥½ä¹‹å,ç”¨<code>xcrun</code>å‘½ä»¤å¯¼å‡ºæ‰€éœ€è¦çš„åŒ…ã€‚ï¼ˆ<code>xcodebuild</code>å‘½ä»¤ç¼–è¯‘ä¸º<code>.app</code>æ–‡ä»¶ï¼Œ<code>xcrun</code>å‘½ä»¤å°†<code>.app</code>æ–‡ä»¶æ‰“åŒ…ä¸º<code>.ipa</code>æ–‡ä»¶ï¼‰</p><p>å®‰è£…<code>fir-cli</code>æ‰§è¡Œå‘½ä»¤<code>gem fir-cli</code>å³å¯å®‰è£…ã€‚å®‰è£…æˆåŠŸåä½¿ç”¨<code>fir</code>æŒ‡ä»¤ä¸Šä¼ æˆ‘ä»¬çš„æµ‹è¯•åŒ…ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># å°†XXXæ›¿æ¢æˆè‡ªå·±çš„Firå¹³å°çš„token</span><br><span class="line">fir login -T XXX</span><br><span class="line">fir publish $exportIpaPath/$scheme_name.ipa</span><br></pre></td></tr></table></figure><h4 id="2-ç¼–å†™è„šæœ¬"><a href="#2-ç¼–å†™è„šæœ¬" class="headerlink" title="2.ç¼–å†™è„šæœ¬"></a>2.ç¼–å†™è„šæœ¬</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä½¿ç”¨æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ ! -d ./IPADir ];</span><br><span class="line">then</span><br><span class="line">mkdir -p IPADir;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="comment">#å·¥ç¨‹ç»å¯¹è·¯å¾„</span></span><br><span class="line">project_path=$(cd `dirname $<span class="number">0</span>`; pwd)</span><br><span class="line"></span><br><span class="line"><span class="comment">#å·¥ç¨‹å å°†XXXæ›¿æ¢æˆè‡ªå·±çš„å·¥ç¨‹å</span></span><br><span class="line">project_name=XXX</span><br><span class="line"></span><br><span class="line"><span class="comment">#schemeå å°†XXXæ›¿æ¢æˆè‡ªå·±çš„shemeå</span></span><br><span class="line">scheme_name=XXX</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‰“åŒ…æ¨¡å¼ Debug/Release</span></span><br><span class="line">development_mode=Debug</span><br><span class="line"></span><br><span class="line"><span class="comment">#buildæ–‡ä»¶å¤¹è·¯å¾„</span></span><br><span class="line">build_path=$&#123;project_path&#125;/build</span><br><span class="line"></span><br><span class="line"><span class="comment">#plistæ–‡ä»¶æ‰€åœ¨è·¯å¾„</span></span><br><span class="line">exportOptionsPlistPath=$&#123;project_path&#125;/exportTest.plist</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯¼å‡º.ipaæ–‡ä»¶æ‰€åœ¨è·¯å¾„</span></span><br><span class="line">exportIpaPath=$&#123;project_path&#125;/IPADir/$&#123;development_mode&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">echo <span class="string">"Place enter the number you want to export ? [ 1:app-store 2:ad-hoc] "</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##</span></span><br><span class="line">read number</span><br><span class="line"><span class="keyword">while</span>([[ $number != <span class="number">1</span> ]] &amp;&amp; [[ $number != <span class="number">2</span> ]])</span><br><span class="line">do</span><br><span class="line">echo <span class="string">"Error! Should enter 1 or 2"</span></span><br><span class="line">echo <span class="string">"Place enter the number you want to export ? [ 1:app-store 2:ad-hoc] "</span></span><br><span class="line">read number</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ $number == <span class="number">1</span> ];then</span><br><span class="line">development_mode=Release</span><br><span class="line">exportOptionsPlistPath=$&#123;project_path&#125;/exportAppstore.plist</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">development_mode=Debug</span><br><span class="line">exportOptionsPlistPath=$&#123;project_path&#125;/exportTest.plist</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">echo <span class="string">'///-----------'</span></span><br><span class="line">echo <span class="string">'/// æ­£åœ¨æ¸…ç†å·¥ç¨‹'</span></span><br><span class="line">echo <span class="string">'///-----------'</span></span><br><span class="line">xcodebuild \</span><br><span class="line">clean -configuration $&#123;development_mode&#125; -quiet  || exit</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">echo <span class="string">'///--------'</span></span><br><span class="line">echo <span class="string">'/// æ¸…ç†å®Œæˆ'</span></span><br><span class="line">echo <span class="string">'///--------'</span></span><br><span class="line">echo <span class="string">''</span></span><br><span class="line"></span><br><span class="line">echo <span class="string">'///-----------'</span></span><br><span class="line">echo <span class="string">'/// æ­£åœ¨ç¼–è¯‘å·¥ç¨‹:'</span>$&#123;development_mode&#125;</span><br><span class="line">echo <span class="string">'///-----------'</span></span><br><span class="line">xcodebuild \</span><br><span class="line">archive -workspace $&#123;project_path&#125;/$&#123;project_name&#125;.xcworkspace \</span><br><span class="line">-scheme $&#123;scheme_name&#125; \</span><br><span class="line">-configuration $&#123;development_mode&#125; \</span><br><span class="line">-archivePath $&#123;build_path&#125;/$&#123;project_name&#125;.xcarchive  -quiet  || exit</span><br><span class="line"></span><br><span class="line">echo <span class="string">'///--------'</span></span><br><span class="line">echo <span class="string">'/// ç¼–è¯‘å®Œæˆ'</span></span><br><span class="line">echo <span class="string">'///--------'</span></span><br><span class="line">echo <span class="string">''</span></span><br><span class="line"></span><br><span class="line">echo <span class="string">'///----------'</span></span><br><span class="line">echo <span class="string">'/// å¼€å§‹ipaæ‰“åŒ…'</span></span><br><span class="line">echo <span class="string">'///----------'</span></span><br><span class="line">xcodebuild -exportArchive -archivePath $&#123;build_path&#125;/$&#123;project_name&#125;.xcarchive \</span><br><span class="line">-configuration $&#123;development_mode&#125; \</span><br><span class="line">-exportPath $&#123;exportIpaPath&#125; \</span><br><span class="line">-exportOptionsPlist $&#123;exportOptionsPlistPath&#125; \</span><br><span class="line">-quiet || exit</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -e $exportIpaPath/$scheme_name.ipa ]; then</span><br><span class="line">echo <span class="string">'///----------'</span></span><br><span class="line">echo <span class="string">'/// ipaåŒ…å·²å¯¼å‡º'</span></span><br><span class="line">echo <span class="string">'///----------'</span></span><br><span class="line">open $exportIpaPath</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">echo <span class="string">'///-------------'</span></span><br><span class="line">echo <span class="string">'/// ipaåŒ…å¯¼å‡ºå¤±è´¥ '</span></span><br><span class="line">echo <span class="string">'///-------------'</span></span><br><span class="line">fi</span><br><span class="line">echo <span class="string">'///------------'</span></span><br><span class="line">echo <span class="string">'/// æ‰“åŒ…ipaå®Œæˆ  '</span></span><br><span class="line">echo <span class="string">'///-----------='</span></span><br><span class="line">echo <span class="string">''</span></span><br><span class="line"></span><br><span class="line">echo <span class="string">'///-------------'</span></span><br><span class="line">echo <span class="string">'/// å¼€å§‹å‘å¸ƒipaåŒ… '</span></span><br><span class="line">echo <span class="string">'///-------------'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ $number == <span class="number">1</span> ];then</span><br><span class="line"></span><br><span class="line"><span class="comment">#éªŒè¯å¹¶ä¸Šä¼ åˆ°App Store</span></span><br><span class="line"><span class="comment"># å°†-u åé¢çš„XXXæ›¿æ¢æˆè‡ªå·±çš„AppleIDçš„è´¦å·ï¼Œ-påé¢çš„XXXæ›¿æ¢æˆè‡ªå·±çš„å¯†ç </span></span><br><span class="line">altoolPath=<span class="string">"/Applications/Xcode.app/Contents/Applications/Application Loader.app/Contents/Frameworks/ITunesSoftwareService.framework/Versions/A/Support/altool"</span></span><br><span class="line"><span class="string">"$altoolPath"</span> --validate-app -f $&#123;exportIpaPath&#125;/$&#123;scheme_name&#125;.ipa -u XXX -p XXX -t ios --output-format xml</span><br><span class="line"><span class="string">"$altoolPath"</span> --upload-app -f $&#123;exportIpaPath&#125;/$&#123;scheme_name&#125;.ipa -u  XXX -p XXX -t ios --output-format xml</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸Šä¼ åˆ°Fir</span></span><br><span class="line"><span class="comment"># å°†XXXæ›¿æ¢æˆè‡ªå·±çš„Firå¹³å°çš„token</span></span><br><span class="line">fir login -T XXX</span><br><span class="line">fir publish $exportIpaPath/$scheme_name.ipa</span><br><span class="line"></span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">exit <span class="number">0</span></span><br></pre></td></tr></table></figure><p><a href="https://github.com/kHeQing/HQArchiveScript.git" target="_blank" rel="noopener">è„šæœ¬æ–‡ä»¶ä¸‹è½½</a></p><p><strong>è¯´æ˜ï¼š</strong> </p><p>ç”¨<code>\</code>æ¥è¿›è¡Œæ¢è¡Œåˆ†éš”ï¼Œä¸€æ¡<code>shell</code>å‘½ä»¤è¿‡é•¿æ—¶å¯ä»¥è¿›è¡Œåˆ†å‰²æ˜¾ç¤º.<br><code>$</code>å˜é‡åæ˜¯å¼•ç”¨å˜é‡ï¼Œæ‹¿æ¥ä½¿ç”¨<br><code>|| exit</code> æŒ‡æ˜å¦‚æœè¿™ä¸€æ¡å‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œåˆ™é€€å‡ºå½“å‰<code>shell</code>.</p><p>å¦‚æœé¡¹ç›®æ²¡æœ‰é‡‡ç”¨<code>Cocoapods</code>ç®¡ç†ï¼Œæ²¡æœ‰<br><code>.xcworkspace</code>,åªæœ‰xcodeproj`,åªéœ€è¦å°†è„šæœ¬ä¸­è¿™å¥</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xcodebuild \</span><br><span class="line">archive -workspace $&#123;project_path&#125;/$&#123;project_name&#125;.xcworkspace \</span><br></pre></td></tr></table></figure><p>æ”¹ä¸º</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xcodebuild \</span><br><span class="line">archive -project $&#123;project_path&#125;/$&#123;project_name&#125;.xcodeproj \</span><br></pre></td></tr></table></figure><p>å°±ğŸ‘Œäº†</p><p>å¦‚æœæ˜¯è’²å…¬è‹±çš„è¯å°†è„šæœ¬ä¸­çš„</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¸Šä¼ åˆ°Fir</span></span><br><span class="line"><span class="comment"># å°†XXXæ›¿æ¢æˆè‡ªå·±çš„Firå¹³å°çš„token</span></span><br><span class="line">fir login -T XXX</span><br><span class="line">fir publish $exportIpaPath/$scheme_name.ipa</span><br></pre></td></tr></table></figure><p>æ›¿æ¢ä¸º</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸Šä¼ åˆ°è’²å…¬è‹±</span></span><br><span class="line"><span class="comment"># å°†XXXæ›¿æ¢æˆè‡ªå·±çš„Firå¹³å°çš„token</span></span><br><span class="line">curl -F <span class="string">"file=@$&#123;exportIpaPath&#125;/$&#123;scheme_name&#125;.ipa"</span> \</span><br><span class="line">-F <span class="string">"uKey=$&#123;uKey&#125;"</span> \</span><br><span class="line">-F <span class="string">"_api_key=$&#123;apiKey&#125;"</span> \</span><br><span class="line">https://www.pgyer.com/apiv1/app/upload</span><br></pre></td></tr></table></figure><p>å³å¯ã€‚<br><code>$uKey</code>æ˜¯å¼€å‘è€…çš„ç”¨æˆ·<code>Key</code>ï¼Œåœ¨è’²å…¬è‹±å¹³å°<code>åº”ç”¨ç®¡ç†-API</code>ä¸­æŸ¥çœ‹ã€‚<br><code>$apiKey</code>æ˜¯å¼€å‘è€…çš„<code>API Key</code>ï¼Œåœ¨è’²å…¬è‹±å¹³å°<code>åº”ç”¨ç®¡ç†-API</code>ä¸­æŸ¥çœ‹ã€‚</p><h4 id="3-ä½¿ç”¨"><a href="#3-ä½¿ç”¨" class="headerlink" title="3.ä½¿ç”¨"></a>3.ä½¿ç”¨</h4><ol><li>å°†è„šæœ¬æ–‡ä»¶ä¸‹è½½ä¸‹æ¥ï¼Œæ ¹æ®æ–‡ä»¶ä¸­çš„æ³¨é‡Šé…ç½®å¥½æ–‡ä»¶ï¼Œç„¶åå°†ä¸‰ä¸ªæ–‡ä»¶æ‹–åˆ°é¡¹ç›®çš„æ ¹ç›®å½•ã€‚</li><li>é¡¹ç›®çš„è¯ä¹¦æè¿°æ–‡ä»¶é…ç½®å¥½ã€‚</li><li>å»firå¹³å°è·å–åˆ°<code>API token</code>ã€‚</li><li><code>cd</code>åˆ°å·¥ç¨‹æ ¹ç›®å½•ï¼Œ<code>./shell.sh</code>å›è½¦å°±ä¼šæ‰§è¡Œè„šæœ¬ã€‚</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;æ¯æ¬¡æ›´æ–°é¡¹ç›®éƒ½è¦ç»™æµ‹è¯•äººå‘˜æ‰“åŒ…ï¼Œè¦ä¹ˆæŒ¨ä¸ªæµ‹è¯•æœºå®‰è£…ï¼Œè¦ä¹ˆå‘å¸ƒåˆ°è’²å…¬è‹±æˆ–è€…Firç­‰ç¬¬ä¸‰æ–¹æ‰˜ç®¡å¹³å°ï¼Œ&lt;code&gt;Product -&amp;gt; Archive&lt;/code&gt;ç¼–è¯‘æ‰“åŒ…,é€‰æ‹©&lt;code&gt;Organizer&lt;/code&gt;,å¯¼å‡º&lt;code&gt;ad hoc&lt;/code&gt;çš„&lt;code&gt;ipa&lt;/code&gt;åŒ…ä¸Šä¼ ã€‚å¾ˆæ˜¯éº»çƒ¦ï¼Œå› æ­¤å†™ä¸ªè„šæœ¬è‡ªåŠ¨æ‰“åŒ…å‘å¸ƒã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
  </entry>
  
  <entry>
    <title>å†…è”å‡½æ•°ä¸å®å®šä¹‰</title>
    <link href="http://yoursite.com/2018/02/10/%E5%86%85%E8%81%94%E5%87%BD%E6%95%B0%E4%B8%8E%E5%AE%8F%E5%AE%9A%E4%B9%89/"/>
    <id>http://yoursite.com/2018/02/10/å†…è”å‡½æ•°ä¸å®å®šä¹‰/</id>
    <published>2018-02-10T06:14:27.000Z</published>
    <updated>2018-02-10T06:14:27.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>åœ¨Cä¸­ï¼Œå¸¸ç”¨é¢„å¤„ç†è¯­å¥#defineæ¥ä»£æ›¿ä¸€ä¸ªå‡½æ•°å®šä¹‰ã€‚<br><a id="more"></a></p></blockquote><h4 id="å†…è”å‡½æ•°ä¸å®å®šä¹‰"><a href="#å†…è”å‡½æ•°ä¸å®å®šä¹‰" class="headerlink" title="å†…è”å‡½æ•°ä¸å®å®šä¹‰"></a>å†…è”å‡½æ•°ä¸å®å®šä¹‰</h4><p>åœ¨Cä¸­ï¼Œå¸¸ç”¨é¢„å¤„ç†è¯­å¥#defineæ¥ä»£æ›¿ä¸€ä¸ªå‡½æ•°å®šä¹‰ã€‚<br>ä¾‹å¦‚ï¼š<br><code>#define MAX(aï¼Œb) ((a)&gt;(b)?(a):(b))</code> </p><p>è¯¥è¯­å¥ä½¿å¾—ç¨‹åºä¸­æ¯ä¸ªå‡ºç°<code>MAX(a,b)</code>å‡½æ•°è°ƒç”¨çš„åœ°æ–¹éƒ½è¢«å®å®šä¹‰ä¸­åé¢çš„è¡¨è¾¾å¼<code>((a)&gt;(b)?(a):(b))</code>æ‰€æ›¿æ¢ã€‚</p><p>å®å®šä¹‰è¯­å¥çš„ä¹¦å†™æ ¼å¼æœ‰è¿‡åˆ†çš„è®²ç©¶ï¼Œ<code>MAX</code>ä¸æ‹¬å·ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œæ‰€æœ‰çš„å‚æ•°éƒ½è¦æ”¾åœ¨æ‹¬å·é‡Œã€‚å°½ç®¡å¦‚æ­¤ï¼Œå®ƒè¿˜æ˜¯æœ‰éº»çƒ¦ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">int a=1ï¼Œb=0ï¼›</span><br><span class="line">MAX(a++,b)ï¼› //aè¢«å¢å€¼2æ¬¡</span><br><span class="line">MAX(a++,b+10)ï¼› //aè¢«å¢å€¼1æ¬¡</span><br><span class="line">MAX(a,&quot;Hello&quot;)ï¼›//é”™è¯¯åœ°æ¯”è¾ƒintå’Œå­—ç¬¦ä¸²ï¼Œæ²¡æœ‰å‚æ•°ç±»å‹æ£€æŸ¥</span><br></pre></td></tr></table></figure><p><code>MAX( )</code>å‡½æ•°çš„æ±‚å€¼ä¼šç”±äºä¸¤ä¸ªå‚æ•°å€¼çš„å¤§å°ä¸åŒè€Œäº§ç”Ÿä¸åŒçš„å‰¯ä½œç”¨ã€‚<code>MAX(a++,b)</code>çš„å€¼ä¸º2ï¼ŒåŒæ—¶açš„å€¼ä¸º3ï¼›<code>MAX(a++,b+10)</code>çš„å€¼ä¸º10ï¼ŒåŒæ—¶açš„å€¼ä¸º2ã€‚å¦‚æœæ˜¯æ™®é€šå‡½æ•°ï¼Œåˆ™<code>MAX(a,&quot;HellO&quot;)</code>ä¼šå—åˆ°å‡½æ•°è°ƒç”¨çš„æ£€æŸ¥ï¼Œä½†æ­¤å¤„ä¸ä¼šå› ä¸ºä¸¤ä¸ªå‚æ•°ç±»å‹ä¸åŒè€Œè¢«ç¼–è¯‘æ‹’ä¹‹é—¨å¤–ã€‚å¹¸è¿çš„æ˜¯ï¼Œé€šè¿‡ä¸€ä¸ª<strong>å†…è”å‡½æ•°</strong>å¯ä»¥å¾—åˆ°æ‰€æœ‰<strong>å®çš„æ›¿æ¢æ•ˆèƒ½</strong>å’Œæ‰€æœ‰<strong>å¯é¢„è§çš„çŠ¶æ€ä»¥åŠå¸¸è§„å‡½æ•°çš„ç±»å‹æ£€æŸ¥</strong>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">inline int MAX(int aï¼Œint b)</span><br><span class="line">&#123;</span><br><span class="line">ã€€ return a&gt;b?a:bï¼›</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li><p>å†…è”å‡½æ•°ä¸å®çš„åŒºåˆ«ï¼š</p><p> ä¼ ç»Ÿçš„å®å®šä¹‰å‡½æ•°å¯èƒ½ä¼šå¼•èµ·ä¸€äº›éº»çƒ¦ã€‚</p><p> exï¼š</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#define F(x) x+x</span><br><span class="line">  </span><br><span class="line">void main()&#123;int i=1;F(i++);&#125;</span><br></pre></td></tr></table></figure><p> è¿™é‡Œxå°†è¢«åŠ ä¸¤æ¬¡ã€‚</p><p> å†…è”å‡½æ•°è¢«ç¼–è¯‘å™¨è‡ªåŠ¨çš„ç”¨å‡½æ•°çš„å½¢åŠ¿æ·»åŠ è¿›ä»£ç ï¼Œè€Œä¸ä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚</p><p> å†…è”å‡½æ•°çš„ä½¿ç”¨æé«˜äº†æ•ˆç‡ï¼ˆçœå»äº†å¾ˆå¤šå‡½æ•°è°ƒç”¨æ±‡ç¼–ä»£ç å¦‚ï¼šcallå’Œretç­‰ï¼‰ã€‚</p></li><li><p>å†…è”å‡½æ•°çš„ä½¿ç”¨ï¼š</p><p> æ‰€æœ‰åœ¨ç±»çš„å£°æ˜ä¸­å®šä¹‰çš„å‡½æ•°å°†è¢«è‡ªåŠ¨è®¤ä¸ºæ˜¯å†…è”å‡½æ•°ã€‚</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">class A()</span><br><span class="line">&#123;</span><br><span class="line">    void c();// not a inline function;</span><br><span class="line"></span><br><span class="line">    void d()&#123; </span><br><span class="line">        print(&quot;d() is a inline function.&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> å¦‚æœæƒ³å°†ä¸€ä¸ªå…¨å±€å‡½æ•°å®šä¹‰ä¸ºå†…è”å‡½æ•°å¯ç”¨ï¼Œinline å…³é”®å­—ã€‚</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">inline a()&#123;</span><br><span class="line">    print(&quot;a() is a inline function.&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> <strong>æ³¨æ„ï¼š</strong></p><p>   åœ¨å†…è”å‡½æ•°ä¸­å¦‚æœæœ‰å¤æ‚æ“ä½œå°†ä¸è¢«å†…è”ã€‚å¦‚ï¼šå¾ªç¯å’Œé€’å½’è°ƒç”¨ã€‚</p><p> <strong>æ€»ç»“ï¼š</strong></p><p>   å°†ç®€å•çŸ­å°çš„å‡½æ•°å®šä¹‰ä¸ºå†…è”å‡½æ•°å°†ä¼šæé«˜æ•ˆç‡ã€‚</p></li></ol><h4 id="ç”¨å†…è”å–ä»£å®ä»£ç "><a href="#ç”¨å†…è”å–ä»£å®ä»£ç " class="headerlink" title="ç”¨å†…è”å–ä»£å®ä»£ç "></a>ç”¨å†…è”å–ä»£å®ä»£ç </h4><p><code>C++</code>è¯­è¨€æ”¯æŒå‡½æ•°å†…è”ï¼Œå…¶ç›®çš„æ˜¯ä¸ºäº†æé«˜å‡½æ•°çš„æ‰§è¡Œæ•ˆç‡ï¼ˆé€Ÿåº¦ï¼‰ã€‚<br>åœ¨Cç¨‹åºä¸­ï¼Œå¯ä»¥ç”¨å®ä»£ç æé«˜æ‰§è¡Œæ•ˆç‡ã€‚å®ä»£ç æœ¬èº«ä¸æ˜¯å‡½æ•°ï¼Œä½†ä½¿ç”¨èµ·æ¥è±¡å‡½æ•°ã€‚<br><strong>é¢„å¤„ç†å™¨ç”¨å¤åˆ¶å®ä»£ç çš„æ–¹å¼ä»£æ›¿å‡½æ•°è°ƒç”¨ï¼Œçœå»äº†å‚æ•°å‹æ ˆã€ç”Ÿæˆæ±‡ç¼–è¯­è¨€çš„CALLè°ƒç”¨ã€è¿”å›å‚æ•°ã€æ‰§è¡Œreturnç­‰è¿‡ç¨‹ï¼Œä»è€Œæé«˜äº†é€Ÿåº¦ã€‚</strong> ä½¿ç”¨å®ä»£ç æœ€å¤§çš„ç¼ºç‚¹æ˜¯å®¹æ˜“å‡ºé”™ï¼Œé¢„å¤„ç†å™¨åœ¨å¤åˆ¶å®ä»£ç æ—¶å¸¸å¸¸äº§ç”Ÿæ„æƒ³ä¸åˆ°çš„è¾¹é™…æ•ˆåº”ã€‚ä¾‹å¦‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#define MAX(a, b)       (a) &gt; (b) ? (a) : (b)</span><br></pre></td></tr></table></figure><p>è¯­å¥  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result = MAX(i, j) + 2 ;</span><br></pre></td></tr></table></figure><p>å°†è¢«é¢„å¤„ç†å™¨è§£é‡Šä¸º </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result = (i) &gt; (j) ? (i) : (j) + 2 ;</span><br></pre></td></tr></table></figure><p>ç”±äºè¿ç®—ç¬¦<code>â€˜+â€™</code>æ¯”è¿ç®—ç¬¦<code>â€˜:â€™</code>çš„ä¼˜å…ˆçº§é«˜ï¼Œæ‰€ä»¥ä¸Šè¿°è¯­å¥å¹¶ä¸ç­‰ä»·äºæœŸæœ›çš„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result = ( (i) &gt; (j) ? (i) : (j) ) + 2 ;</span><br></pre></td></tr></table></figure><p>å¦‚æœæŠŠå®ä»£ç æ”¹å†™ä¸º</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#define MAX(a, b)       ( (a) &gt; (b) ? (a) : (b) )</span><br></pre></td></tr></table></figure><p>åˆ™å¯ä»¥è§£å†³ç”±ä¼˜å…ˆçº§å¼•èµ·çš„é”™è¯¯ã€‚ä½†æ˜¯å³ä½¿ä½¿ç”¨ä¿®æ”¹åçš„å®ä»£ç ä¹Ÿä¸æ˜¯ä¸‡æ— ä¸€å¤±çš„ï¼Œä¾‹å¦‚è¯­å¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result = MAX(i++, j);</span><br></pre></td></tr></table></figure><p>å°†è¢«é¢„å¤„ç†å™¨è§£é‡Šä¸º </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result = (i++) &gt; (j) ? (i++) : (j);</span><br></pre></td></tr></table></figure><p>å¯¹äº<code>C++</code> è€Œè¨€ï¼Œä½¿ç”¨å®ä»£ç è¿˜æœ‰å¦ä¸€ç§ç¼ºç‚¹ï¼š<strong>æ— æ³•æ“ä½œç±»çš„ç§æœ‰æ•°æ®æˆå‘˜ã€‚</strong></p><p>è®©æˆ‘ä»¬çœ‹çœ‹<code>C++</code>çš„â€œå‡½æ•°å†…è”â€æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p><p><strong>å¯¹äºä»»ä½•å†…è”å‡½æ•°ï¼Œç¼–è¯‘å™¨åœ¨ç¬¦å·è¡¨é‡Œæ”¾å…¥å‡½æ•°çš„å£°æ˜ï¼ˆåŒ…æ‹¬åå­—ã€å‚æ•°ç±»å‹ã€è¿”å›å€¼ç±»å‹ï¼‰ã€‚å¦‚æœç¼–è¯‘å™¨æ²¡æœ‰å‘ç°å†…è”å‡½æ•°å­˜åœ¨é”™è¯¯ï¼Œé‚£ä¹ˆè¯¥å‡½æ•°çš„ä»£ç ä¹Ÿè¢«æ”¾å…¥ç¬¦å·è¡¨é‡Œã€‚åœ¨è°ƒç”¨ä¸€ä¸ªå†…è”å‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨é¦–å…ˆæ£€æŸ¥è°ƒç”¨æ˜¯å¦æ­£ç¡®ï¼ˆè¿›è¡Œç±»å‹å®‰å…¨æ£€æŸ¥ï¼Œæˆ–è€…è¿›è¡Œè‡ªåŠ¨ç±»å‹è½¬æ¢ï¼Œå½“ç„¶å¯¹æ‰€æœ‰çš„å‡½æ•°éƒ½ä¸€æ ·ï¼‰ã€‚å¦‚æœæ­£ç¡®ï¼Œå†…è”å‡½æ•°çš„ä»£ç å°±ä¼šç›´æ¥æ›¿æ¢å‡½æ•°è°ƒç”¨ï¼Œäºæ˜¯çœå»äº†å‡½æ•°è°ƒç”¨çš„å¼€é”€ã€‚</strong>  </p><p>è¿™ä¸ªè¿‡ç¨‹ä¸é¢„å¤„ç†æœ‰æ˜¾è‘—çš„ä¸åŒï¼Œå› ä¸ºé¢„å¤„ç†å™¨ä¸èƒ½è¿›è¡Œç±»å‹å®‰å…¨æ£€æŸ¥ï¼Œæˆ–è€…è¿›è¡Œè‡ªåŠ¨ç±»å‹è½¬æ¢ã€‚å‡å¦‚å†…è”å‡½æ•°æ˜¯æˆå‘˜å‡½æ•°ï¼Œå¯¹è±¡çš„åœ°å€ï¼ˆthisï¼‰ä¼šè¢«æ”¾åœ¨åˆé€‚çš„åœ°æ–¹ï¼Œè¿™ä¹Ÿæ˜¯é¢„å¤„ç†å™¨åŠä¸åˆ°çš„ã€‚<br><code>C++</code>è¯­è¨€çš„å‡½æ•°å†…è”æœºåˆ¶æ—¢å…·å¤‡å®ä»£ç çš„æ•ˆç‡ï¼Œåˆå¢åŠ äº†å®‰å…¨æ€§ï¼Œè€Œä¸”å¯ä»¥è‡ªç”±æ“ä½œç±»çš„æ•°æ®æˆå‘˜ã€‚</p><p>æ‰€ä»¥åœ¨<code>C++</code>ç¨‹åºä¸­ï¼Œåº”è¯¥ç”¨å†…è”å‡½æ•°å–ä»£æ‰€æœ‰å®ä»£ç ï¼Œâ€œæ–­è¨€assertâ€ææ€•æ˜¯å”¯ä¸€çš„ä¾‹å¤–ã€‚assertæ˜¯ä»…åœ¨Debugç‰ˆæœ¬èµ·ä½œç”¨çš„å®ï¼Œå®ƒç”¨äºæ£€æŸ¥â€œä¸åº”è¯¥â€å‘ç”Ÿçš„æƒ…å†µã€‚ä¸ºäº†ä¸åœ¨ç¨‹åºçš„Debugç‰ˆæœ¬å’ŒReleaseç‰ˆæœ¬å¼•èµ·å·®åˆ«ï¼Œassertä¸åº”è¯¥äº§ç”Ÿä»»ä½•å‰¯ä½œç”¨ã€‚å¦‚æœassertæ˜¯å‡½æ•°ï¼Œç”±äºå‡½æ•°è°ƒç”¨ä¼šå¼•èµ·å†…å­˜ã€ä»£ç çš„å˜åŠ¨ï¼Œé‚£ä¹ˆå°†å¯¼è‡´Debugç‰ˆæœ¬ä¸Releaseç‰ˆæœ¬å­˜åœ¨å·®å¼‚ã€‚æ‰€ä»¥assertä¸æ˜¯å‡½æ•°ï¼Œè€Œæ˜¯å®ã€‚</p><h4 id="å†…è”å‡½æ•°çš„ç¼–ç¨‹é£æ ¼"><a href="#å†…è”å‡½æ•°çš„ç¼–ç¨‹é£æ ¼" class="headerlink" title="å†…è”å‡½æ•°çš„ç¼–ç¨‹é£æ ¼"></a>å†…è”å‡½æ•°çš„ç¼–ç¨‹é£æ ¼</h4><p>å…³é”®å­—<code>inline</code>å¿…é¡»ä¸å‡½æ•°å®šä¹‰ä½“æ”¾åœ¨ä¸€èµ·æ‰èƒ½ä½¿å‡½æ•°æˆä¸ºå†…è”ï¼Œä»…å°†inlineæ”¾åœ¨å‡½æ•°å£°æ˜å‰é¢ä¸èµ·ä»»ä½•ä½œç”¨ã€‚å¦‚ä¸‹é£æ ¼çš„å‡½æ•°Fooä¸èƒ½æˆä¸ºå†…è”å‡½æ•°ï¼š </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">inline void Foo(int x, int y);  // inlineä»…ä¸å‡½æ•°å£°æ˜æ”¾åœ¨ä¸€èµ· </span><br><span class="line">void Foo(int x, int y) </span><br><span class="line">&#123; </span><br><span class="line">â€¦ </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è€Œå¦‚ä¸‹é£æ ¼çš„å‡½æ•°Fooåˆ™æˆä¸ºå†…è”å‡½æ•°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">void Foo(int x, int y);  </span><br><span class="line">inline void Foo(int x, int y) // inlineä¸å‡½æ•°å®šä¹‰ä½“æ”¾åœ¨ä¸€èµ· </span><br><span class="line">&#123; </span><br><span class="line">â€¦ </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥è¯´ï¼Œ<code>inline</code>æ˜¯ä¸€ç§<br><strong>â€œç”¨äºå®ç°çš„å…³é”®å­—â€</strong><br>ï¼Œè€Œä¸æ˜¯ä¸€ç§<br><strong>â€œç”¨äºå£°æ˜çš„å…³é”®å­—â€</strong><br>ã€‚ä¸€èˆ¬åœ°ï¼Œç”¨æˆ·å¯ä»¥é˜…è¯»å‡½æ•°çš„å£°æ˜ï¼Œä½†æ˜¯çœ‹ä¸åˆ°å‡½æ•°çš„å®šä¹‰ã€‚å°½ç®¡åœ¨å¤§å¤šæ•°æ•™ç§‘ä¹¦ä¸­å†…è”å‡½æ•°çš„å£°æ˜ã€å®šä¹‰ä½“å‰é¢éƒ½åŠ äº†<code>inline</code>å…³é”®å­—ï¼Œä½†æˆ‘è®¤ä¸º<code>inline</code>ä¸åº”è¯¥å‡ºç°åœ¨å‡½æ•°çš„å£°æ˜ä¸­ã€‚è¿™ä¸ªç»†èŠ‚è™½ç„¶ä¸ä¼šå½±å“å‡½æ•°çš„åŠŸèƒ½ï¼Œä½†æ˜¯ä½“ç°äº†é«˜è´¨é‡<code>C++/C</code>ç¨‹åºè®¾è®¡é£æ ¼çš„ä¸€ä¸ªåŸºæœ¬åŸåˆ™ï¼š<strong>å£°æ˜ä¸å®šä¹‰ä¸å¯æ··ä¸ºä¸€è°ˆï¼Œç”¨æˆ·æ²¡æœ‰å¿…è¦ã€ä¹Ÿä¸åº”è¯¥çŸ¥é“å‡½æ•°æ˜¯å¦éœ€è¦å†…è”ã€‚</strong></p><p>å®šä¹‰åœ¨ç±»å£°æ˜ä¹‹ä¸­çš„æˆå‘˜å‡½æ•°å°†è‡ªåŠ¨åœ°æˆä¸ºå†…è”å‡½æ•°ï¼Œä¾‹å¦‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">class A </span><br><span class="line">&#123; </span><br><span class="line">public: </span><br><span class="line">void Foo(int x, int y) &#123; â€¦ &#125;  // è‡ªåŠ¨åœ°æˆä¸ºå†…è”å‡½æ•° </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°†æˆå‘˜å‡½æ•°çš„å®šä¹‰ä½“æ”¾åœ¨ç±»å£°æ˜ä¹‹ä¸­è™½ç„¶èƒ½å¸¦æ¥ä¹¦å†™ä¸Šçš„æ–¹ä¾¿ï¼Œä½†ä¸æ˜¯ä¸€ç§è‰¯å¥½çš„ç¼–ç¨‹é£æ ¼ï¼Œä¸Šä¾‹åº”è¯¥æ”¹æˆï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// å¤´æ–‡ä»¶ </span><br><span class="line">class A </span><br><span class="line">&#123; </span><br><span class="line">public: </span><br><span class="line">void Foo(int x, int y)ï¼›  </span><br><span class="line">&#125; </span><br><span class="line">// å®šä¹‰æ–‡ä»¶ </span><br><span class="line">inline void A::Foo(int x, int y) </span><br><span class="line">&#123; </span><br><span class="line">â€¦ </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ…ç”¨å†…è”"><a href="#æ…ç”¨å†…è”" class="headerlink" title="æ…ç”¨å†…è”"></a>æ…ç”¨å†…è”</h4><p>å†…è”èƒ½æé«˜å‡½æ•°çš„æ‰§è¡Œæ•ˆç‡ï¼Œä¸ºä»€ä¹ˆä¸æŠŠæ‰€æœ‰çš„å‡½æ•°éƒ½å®šä¹‰æˆå†…è”å‡½æ•°ï¼Ÿ </p><p>å¦‚æœæ‰€æœ‰çš„å‡½æ•°éƒ½æ˜¯å†…è”å‡½æ•°ï¼Œè¿˜ç”¨å¾—ç€â€œå†…è”â€è¿™ä¸ªå…³é”®å­—å—ï¼Ÿ</p><p>å†…è”æ˜¯ä»¥<strong>ä»£ç è†¨èƒ€ï¼ˆå¤åˆ¶ï¼‰</strong>ä¸ºä»£ä»·ï¼Œä»…ä»…çœå»äº†<strong>å‡½æ•°è°ƒç”¨</strong>çš„å¼€é”€ï¼Œä»è€Œæé«˜å‡½æ•°çš„æ‰§è¡Œæ•ˆç‡ã€‚å¦‚æœæ‰§è¡Œå‡½æ•°ä½“å†…ä»£ç çš„æ—¶é—´ï¼Œç›¸æ¯”äºå‡½æ•°è°ƒç”¨çš„å¼€é”€è¾ƒå¤§ï¼Œé‚£ä¹ˆæ•ˆç‡çš„æ”¶è·ä¼šå¾ˆå°‘ã€‚å¦ä¸€æ–¹é¢ï¼Œæ¯ä¸€å¤„å†…è”å‡½æ•°çš„è°ƒç”¨éƒ½è¦å¤åˆ¶ä»£ç ï¼Œå°†ä½¿ç¨‹åºçš„æ€»ä»£ç é‡å¢å¤§ï¼Œæ¶ˆè€—æ›´å¤šçš„å†…å­˜ç©ºé—´ã€‚</p><p>ä»¥ä¸‹æƒ…å†µä¸å®œä½¿ç”¨å†…è”ï¼š </p><ul><li>å¦‚æœå‡½æ•°ä½“å†…çš„ä»£ç æ¯”è¾ƒé•¿ï¼Œä½¿ç”¨å†…è”å°†å¯¼è‡´å†…å­˜æ¶ˆè€—ä»£ä»·è¾ƒé«˜ã€‚ </li><li>å¦‚æœå‡½æ•°ä½“å†…å‡ºç°å¾ªç¯ï¼Œé‚£ä¹ˆæ‰§è¡Œå‡½æ•°ä½“å†…ä»£ç çš„æ—¶é—´è¦æ¯”å‡½æ•°è°ƒç”¨çš„å¼€é”€å¤§ã€‚</li></ul><p>ç±»çš„æ„é€ å‡½æ•°å’Œææ„å‡½æ•°å®¹æ˜“è®©äººè¯¯è§£æˆä½¿ç”¨å†…è”æ›´æœ‰æ•ˆã€‚è¦å½“å¿ƒæ„é€ å‡½æ•°å’Œææ„å‡½æ•°å¯èƒ½ä¼šéšè—ä¸€äº›è¡Œä¸ºï¼Œå¦‚â€œå·å·åœ°â€æ‰§è¡Œäº†åŸºç±»æˆ–æˆå‘˜å¯¹è±¡çš„æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ã€‚</p><p>æ‰€ä»¥ä¸è¦éšä¾¿åœ°å°†æ„é€ å‡½æ•°å’Œææ„å‡½æ•°çš„å®šä¹‰ä½“æ”¾åœ¨ç±»å£°æ˜ä¸­ã€‚<br>ä¸€ä¸ªå¥½çš„ç¼–è¯‘å™¨å°†ä¼šæ ¹æ®å‡½æ•°çš„å®šä¹‰ä½“ï¼Œè‡ªåŠ¨åœ°å–æ¶ˆä¸å€¼å¾—çš„å†…è”ï¼ˆè¿™è¿›ä¸€æ­¥è¯´æ˜äº†inlineä¸åº”è¯¥å‡ºç°åœ¨å‡½æ•°çš„å£°æ˜ä¸­ï¼‰ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;åœ¨Cä¸­ï¼Œå¸¸ç”¨é¢„å¤„ç†è¯­å¥#defineæ¥ä»£æ›¿ä¸€ä¸ªå‡½æ•°å®šä¹‰ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="cè¯­è¨€" scheme="http://yoursite.com/categories/c%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="å†…è”å‡½æ•°" scheme="http://yoursite.com/tags/%E5%86%85%E8%81%94%E5%87%BD%E6%95%B0/"/>
    
      <category term="å®å®šä¹‰" scheme="http://yoursite.com/tags/%E5%AE%8F%E5%AE%9A%E4%B9%89/"/>
    
  </entry>
  
  <entry>
    <title>Pythonç¬”è®° __slots__ &amp; @property</title>
    <link href="http://yoursite.com/2018/02/05/Python%E7%AC%94%E8%AE%B0%20__slots__/"/>
    <id>http://yoursite.com/2018/02/05/Pythonç¬”è®° __slots__/</id>
    <published>2018-02-05T01:02:32.000Z</published>
    <updated>2018-02-05T02:10:13.000Z</updated>
    
    <content type="html"><![CDATA[<h5 id="slotsæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡ï¼Œä½¿ç”¨å®ƒå¯ä»¥é™åˆ¶ä¸€ä¸ªç±»çš„å®ä¾‹æ‰€æ·»åŠ çš„å±æ€§ã€‚"><a href="#slotsæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡ï¼Œä½¿ç”¨å®ƒå¯ä»¥é™åˆ¶ä¸€ä¸ªç±»çš„å®ä¾‹æ‰€æ·»åŠ çš„å±æ€§ã€‚" class="headerlink" title="slotsæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡ï¼Œä½¿ç”¨å®ƒå¯ä»¥é™åˆ¶ä¸€ä¸ªç±»çš„å®ä¾‹æ‰€æ·»åŠ çš„å±æ€§ã€‚"></a><strong>slots</strong>æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡ï¼Œä½¿ç”¨å®ƒå¯ä»¥é™åˆ¶ä¸€ä¸ªç±»çš„å®ä¾‹æ‰€æ·»åŠ çš„å±æ€§ã€‚</h5><a id="more"></a><p>æ¯”å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(object)</span>:</span></span><br><span class="line">    __slots__ = (<span class="string">'name'</span>, <span class="string">'age'</span>)</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆ<code>Student</code>çš„å®ä¾‹åªèƒ½æ·»åŠ <code>name</code>ï¼Œ<code>age</code>å±æ€§ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = Student() </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.name = <span class="string">'HeQing'</span> </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.age = <span class="number">18</span> </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.score = <span class="number">100</span> </span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">AttributeError: <span class="string">'Student'</span> object has no attribute <span class="string">'score'</span></span><br></pre></td></tr></table></figure><p><code>score</code>å±æ€§æ²¡æœ‰æ”¾åœ¨<code>__slots__</code>ä¸­ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ã€‚</p><p>ä½¿ç”¨çš„<code>__slots__</code>çš„æ—¶å€™è¦æ³¨æ„ï¼Œå®ƒä»…å¯¹å½“å‰ç±»çš„å®ä¾‹èµ·ä½œç”¨ï¼Œå¯¹ç»§æ‰¿çš„å­ç±»çš„å®ä¾‹ä¸èµ·ä½œç”¨ï¼Œä¸ä¼šé™åˆ¶å­ç±»å®ä¾‹å±æ€§çš„ç»‘å®šã€‚<br>å¦‚æœå­ç±»ä¸­ä¹Ÿä½¿ç”¨<code>__slots__</code>é‚£ä¹ˆå­ç±»å®ä¾‹å±æ€§é™åˆ¶ä¸ºçˆ¶ç±»çš„<code>__slots__</code>åŠ ä¸Šå­ç±»çš„<code>__slots__</code>ã€‚</p><h5 id="propertyæ˜¯ä¸€ä¸ªè£…é¥°å™¨ï¼ˆdecoratorï¼‰ï¼Œè´Ÿè´£æŠŠä¸€ä¸ªæ–¹æ³•å˜æˆå±æ€§è°ƒç”¨ã€‚è¿™ä¸ªå±æ€§æˆ‘ä»¬å¯ä»¥æ·»åŠ é™åˆ¶ã€‚"><a href="#propertyæ˜¯ä¸€ä¸ªè£…é¥°å™¨ï¼ˆdecoratorï¼‰ï¼Œè´Ÿè´£æŠŠä¸€ä¸ªæ–¹æ³•å˜æˆå±æ€§è°ƒç”¨ã€‚è¿™ä¸ªå±æ€§æˆ‘ä»¬å¯ä»¥æ·»åŠ é™åˆ¶ã€‚" class="headerlink" title="@propertyæ˜¯ä¸€ä¸ªè£…é¥°å™¨ï¼ˆdecoratorï¼‰ï¼Œè´Ÿè´£æŠŠä¸€ä¸ªæ–¹æ³•å˜æˆå±æ€§è°ƒç”¨ã€‚è¿™ä¸ªå±æ€§æˆ‘ä»¬å¯ä»¥æ·»åŠ é™åˆ¶ã€‚"></a><code>@property</code>æ˜¯ä¸€ä¸ªè£…é¥°å™¨ï¼ˆdecoratorï¼‰ï¼Œè´Ÿè´£æŠŠä¸€ä¸ªæ–¹æ³•å˜æˆå±æ€§è°ƒç”¨ã€‚è¿™ä¸ªå±æ€§æˆ‘ä»¬å¯ä»¥æ·»åŠ é™åˆ¶ã€‚</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">score</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self._score </span><br><span class="line"></span><br><span class="line"><span class="meta">    @score.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">score</span><span class="params">(self, value)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(value, int):</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">'score must be an integer!'</span>)</span><br><span class="line">        <span class="keyword">if</span> value &lt; <span class="number">0</span> <span class="keyword">or</span> value &gt; <span class="number">100</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">'score must between 0 ~ 100!'</span>)</span><br><span class="line">        self._score = value</span><br></pre></td></tr></table></figure><p>æŠŠä¸€ä¸ª<code>getter</code>æ–¹æ³•å˜æˆå±æ€§åªéœ€åŠ ä¸Š<code>@proterty</code>ï¼Œæ­¤æ—¶<code>@proterty</code>æœ¬èº«æœ‰åˆ›å»ºäº†å¦ä¸€ä¸ªè£…é¥°å™¨<code>@score.setter</code>ï¼Œè´Ÿè´£æŠŠä¸€ä¸ª<code>setter</code>æ–¹æ³•å˜æˆå±æ€§å€¼ï¼Œè¿™æ ·æˆ‘ä»¬å°±æœ‰äº†ä¸€ä¸ªå¯æ§çš„å±æ€§æ“ä½œï¼Œå¯ä»¥é™åˆ¶å±æ€§çš„å€¼ï¼Œç±»å‹ç­‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = Student()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.score = <span class="number">60</span> <span class="comment"># OKï¼Œå®é™…è½¬åŒ–ä¸ºs.set_score(60)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.score <span class="comment"># OKï¼Œå®é™…è½¬åŒ–ä¸ºs.get_score()</span></span><br><span class="line"><span class="number">60</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.score = <span class="number">9999</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  ...</span><br><span class="line">ValueError: score must between <span class="number">0</span> ~ <span class="number">100</span>!</span><br></pre></td></tr></table></figure><p>å¦‚æœåªå®šä¹‰<code>@property</code>é‚£ä¹ˆè¿™ä¸ªå±æ€§å°±æ˜¯åªè¯»çš„ã€‚</p><p><code>@property</code>ä¸»è¦æ˜¯æ¥ä¿è¯å¯¹å‚æ•°è¿›è¡Œæ£€æŸ¥é™åˆ¶ï¼Œå‡å°‘ç¨‹åºçš„å‡ºé”™ç‡ï¼Œä¿è¯ä»£ç çš„å¥å£®æ€§ã€‚åœ¨ç±»çš„å®šä¹‰ä¸­åº”ç”¨è¾ƒå¹¿ã€‚</p><p><em>ç»ƒä¹ ï¼š</em>è¯·åˆ©ç”¨<code>@property</code>ç»™ä¸€ä¸ª<code>Screen</code>å¯¹è±¡åŠ ä¸Š<code>width</code>å’Œ<code>height</code>å±æ€§ï¼Œä»¥åŠä¸€ä¸ªåªè¯»å±æ€§<code>resolution</code>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Screen</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@property</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">width</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="keyword">return</span> self._width</span><br><span class="line"></span><br><span class="line"><span class="meta">@width.setter</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">width</span><span class="params">(self, value)</span>:</span></span><br><span class="line">self._width = value <span class="comment"># èµ·ååŠ ä¸‹åˆ’çº¿æ˜¯ä¸ºäº†åŒºåˆ†æ˜¯å‡½æ•°è¿˜æ˜¯å˜é‡ï¼Œé¿å…é€’å½’è°ƒç”¨è‡ªå·±</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@property</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">height</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="keyword">return</span> self._height</span><br><span class="line"></span><br><span class="line"><span class="meta">@width.setter</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">height</span><span class="params">(self, value)</span>:</span></span><br><span class="line">self._height = value</span><br><span class="line"></span><br><span class="line"><span class="meta">@property</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">resolution</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="keyword">if</span> self._width &lt; <span class="number">0</span>:</span><br><span class="line"><span class="keyword">raise</span> ValueError(<span class="string">"with and height must over 0"</span>)</span><br><span class="line"><span class="keyword">return</span> self._width * self._height</span><br><span class="line"></span><br><span class="line">s = Screen()</span><br><span class="line">s.width = <span class="number">1024</span></span><br><span class="line">s.height = <span class="number">768</span></span><br><span class="line">print(<span class="string">'resolution ='</span>, s.resolution)</span><br><span class="line"><span class="keyword">if</span> s.resolution == <span class="number">786432</span>:</span><br><span class="line">    print(<span class="string">'æµ‹è¯•é€šè¿‡!'</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'æµ‹è¯•å¤±è´¥!'</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h5 id=&quot;slotsæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡ï¼Œä½¿ç”¨å®ƒå¯ä»¥é™åˆ¶ä¸€ä¸ªç±»çš„å®ä¾‹æ‰€æ·»åŠ çš„å±æ€§ã€‚&quot;&gt;&lt;a href=&quot;#slotsæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡ï¼Œä½¿ç”¨å®ƒå¯ä»¥é™åˆ¶ä¸€ä¸ªç±»çš„å®ä¾‹æ‰€æ·»åŠ çš„å±æ€§ã€‚&quot; class=&quot;headerlink&quot; title=&quot;slotsæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡ï¼Œä½¿ç”¨å®ƒå¯ä»¥é™åˆ¶ä¸€ä¸ªç±»çš„å®ä¾‹æ‰€æ·»åŠ çš„å±æ€§ã€‚&quot;&gt;&lt;/a&gt;&lt;strong&gt;slots&lt;/strong&gt;æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡ï¼Œä½¿ç”¨å®ƒå¯ä»¥é™åˆ¶ä¸€ä¸ªç±»çš„å®ä¾‹æ‰€æ·»åŠ çš„å±æ€§ã€‚&lt;/h5&gt;
    
    </summary>
    
      <category term="Python" scheme="http://yoursite.com/categories/Python/"/>
    
    
      <category term="__slots__" scheme="http://yoursite.com/tags/slots/"/>
    
      <category term="property" scheme="http://yoursite.com/tags/property/"/>
    
  </entry>
  
  <entry>
    <title>Pythonç¬”è®° å®ä¾‹å±æ€§å’Œç±»å±æ€§</title>
    <link href="http://yoursite.com/2018/02/01/Python%E7%AC%94%E8%AE%B0%20%E5%AE%9E%E4%BE%8B%E5%B1%9E%E6%80%A7%E5%92%8C%E7%B1%BB%E5%B1%9E%E6%80%A7/"/>
    <id>http://yoursite.com/2018/02/01/Pythonç¬”è®° å®ä¾‹å±æ€§å’Œç±»å±æ€§/</id>
    <published>2018-02-01T08:55:54.000Z</published>
    <updated>2018-02-02T02:09:32.000Z</updated>
    
    <content type="html"><![CDATA[<p>Pythonæ˜¯ä¸€é—¨åŠ¨æ€è¯­è¨€ï¼Œæ ¹æ®ç±»åˆ›å»ºçš„å®ä¾‹å¯ä»¥ä»»æ„ç»‘å®šå±æ€§ã€‚<br><a id="more"></a>  </p><h5 id="å®ä¾‹å±æ€§çš„ç»‘å®šæœ‰ä¸¤ç§æ–¹å¼ï¼š"><a href="#å®ä¾‹å±æ€§çš„ç»‘å®šæœ‰ä¸¤ç§æ–¹å¼ï¼š" class="headerlink" title="å®ä¾‹å±æ€§çš„ç»‘å®šæœ‰ä¸¤ç§æ–¹å¼ï¼š"></a>å®ä¾‹å±æ€§çš„ç»‘å®šæœ‰ä¸¤ç§æ–¹å¼ï¼š</h5><ul><li><p>åœ¨ç±»é‡Œé¢çš„åˆå§‹åŒ–æ–¹æ³•ä¸­ä»¥<code>self.xxx</code>çš„æ–¹å¼ç»‘å®šï¼š</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span><span class="params">(object)</span>:</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">self.name = name</span><br></pre></td></tr></table></figure></li><li><p>é€šè¿‡å®ä¾‹å˜é‡ç›´æ¥å¤åˆ¶ç»‘å®šï¼š</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s = People(<span class="string">'HeQing'</span>)</span><br><span class="line">s.height = <span class="number">180</span></span><br></pre></td></tr></table></figure></li></ul><h5 id="ç±»å±æ€§ç»‘å®šï¼š"><a href="#ç±»å±æ€§ç»‘å®šï¼š" class="headerlink" title="ç±»å±æ€§ç»‘å®šï¼š"></a>ç±»å±æ€§ç»‘å®šï¼š</h5><ul><li><p>åœ¨ç±»ä¸­ç›´æ¥å®šä¹‰å±æ€§ï¼š</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span><span class="params">(object)</span>:</span></span><br><span class="line">name = <span class="string">"HeQing"</span></span><br></pre></td></tr></table></figure></li></ul><h5 id="å®ä¾‹å±æ€§å’Œç±»å±æ€§ä¹‹é—´çš„å…³ç³»ï¼š"><a href="#å®ä¾‹å±æ€§å’Œç±»å±æ€§ä¹‹é—´çš„å…³ç³»ï¼š" class="headerlink" title="å®ä¾‹å±æ€§å’Œç±»å±æ€§ä¹‹é—´çš„å…³ç³»ï¼š"></a>å®ä¾‹å±æ€§å’Œç±»å±æ€§ä¹‹é—´çš„å…³ç³»ï¼š</h5><p>å¦‚æœå®ä¾‹ä¸­ä¸å­˜åœ¨è¿™ä¸ªå±æ€§ï¼Œä½†æ˜¯ç±»ä¸­å­˜åœ¨ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„å®ä¾‹éƒ½å¯ä»¥è°ƒç”¨è¿™ä¸ªå±æ€§ï¼Œè¿”å›çš„æ˜¯ç±»å±æ€§çš„å€¼ã€‚<br>å¦‚æœå®ä¾‹ä¸­å­˜åœ¨ä¸ç±»ä¸­åŒåçš„å±æ€§é‚£ä¹ˆå®ä¾‹è°ƒç”¨è¿™ä¸ªå±æ€§åˆ™æ˜¯å®ä¾‹è‡ªå·±çš„å±æ€§ã€‚<br>å› æ­¤ä¸è¦å¯¹ç±»å±æ€§å’Œå®ä¾‹å±æ€§ä½¿ç”¨ç›¸åŒçš„åå­—ï¼Œå®ä¾‹å±æ€§ä¼šå±è”½æ‰ç±»å±æ€§ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span><span class="params">(object)</span>:</span></span><br><span class="line">name = <span class="string">"HeQing"</span></span><br><span class="line"></span><br><span class="line">s = People()</span><br><span class="line">print(s.name)  <span class="comment"># HeQing</span></span><br><span class="line"></span><br><span class="line">s.name = <span class="string">"QingHe"</span></span><br><span class="line">print(s.name)  <span class="comment"># QingHe</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">del</span> s.name</span><br><span class="line">print(s.name)  <span class="comment"># HeQing</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Pythonæ˜¯ä¸€é—¨åŠ¨æ€è¯­è¨€ï¼Œæ ¹æ®ç±»åˆ›å»ºçš„å®ä¾‹å¯ä»¥ä»»æ„ç»‘å®šå±æ€§ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="Python" scheme="http://yoursite.com/categories/Python/"/>
    
    
      <category term="Python" scheme="http://yoursite.com/tags/Python/"/>
    
      <category term="å±æ€§" scheme="http://yoursite.com/tags/%E5%B1%9E%E6%80%A7/"/>
    
  </entry>
  
  <entry>
    <title>Pythonç¬”è®° dir()å‡½æ•°</title>
    <link href="http://yoursite.com/2018/02/01/Python%E7%AC%94%E8%AE%B0%20dir()%E5%87%BD%E6%95%B0/"/>
    <id>http://yoursite.com/2018/02/01/Pythonç¬”è®° dir()å‡½æ•°/</id>
    <published>2018-02-01T05:16:51.000Z</published>
    <updated>2018-02-02T02:12:03.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨dir()å‡½æ•°å¯ä»¥è·å–ä¸€ä¸ªPythonçš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªå­˜æ”¾å­—ç¬¦ä¸²çš„listã€‚<br><a id="more"></a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>dir(<span class="string">'string'</span>)</span><br><span class="line">[<span class="string">'__add__'</span>, <span class="string">'__class__'</span>, <span class="string">'__contains__'</span>,..., <span class="string">'title'</span>, <span class="string">'translate'</span>, <span class="string">'upper'</span>, <span class="string">'zfill'</span>]</span><br></pre></td></tr></table></figure><p><code>__xxx__</code>è¿™æ ·çš„å‡½æ•°åœ¨Pythonä¸­æœ‰ç‰¹æ®Šç”¨é€”ï¼Œå¦‚<code>__len__</code>è¿”å›é•¿åº¦ï¼Œå½“ä½ è°ƒç”¨<code>len()</code>æ—¶ï¼Œå®é™…æ˜¯è°ƒç”¨çš„è¯¥å¯¹è±¡çš„<code>__len__()</code>æ–¹æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(<span class="string">'abcd'</span>)</span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'abcd'</span>.__len__()</span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ç±»ä¹Ÿæƒ³ç”¨<code>len()</code>æ–¹æ³•ï¼Œéœ€è¦è‡ªå·±å®ç°<code>__len()__</code>æ–¹æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">Son</span><span class="params">(object)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">__len__</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="meta">... </span>            <span class="keyword">return</span> <span class="number">175</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>son = Son()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(son)</span><br><span class="line"><span class="number">175</span></span><br></pre></td></tr></table></figure><p>å…¶ä»–çš„éƒ½æ˜¯æ™®é€šçš„å‡½æ•°å’Œå±æ€§ï¼Œå¦‚<code>upper()</code>è¿”å›çš„å¤§å†™å­—ç¬¦ä¸²ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'heqing'</span>.upper()</span><br><span class="line"><span class="string">'HEQING'</span></span><br></pre></td></tr></table></figure><p>åˆ—å‡ºå±æ€§å’Œæ–¹æ³•è¿˜ä¸å¤Ÿï¼Œä½¿ç”¨<code>getattr</code>ã€<code>setattr</code>ã€<code>hasattr</code>ï¼Œå¯ä»¥æ“ä½œä¸€ä¸ªå¯¹è±¡çš„å±æ€§çŠ¶æ€ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">MyObj</span><span class="params">(object)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="meta">... </span>            self.x = <span class="number">9</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">power</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="meta">... </span>            <span class="keyword">return</span> self.x * self.x</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>obj = MyObj()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>hasattr(obj,<span class="string">'x'</span>)</span><br><span class="line"><span class="keyword">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>obj.x</span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>hasattr(obj,<span class="string">'y'</span>)</span><br><span class="line"><span class="keyword">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>setattr(obj,<span class="string">'y'</span>,<span class="number">20</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>hasattr(obj,<span class="string">'y'</span>)</span><br><span class="line"><span class="keyword">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>obj.y</span><br><span class="line"><span class="number">20</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>getattr(obj,<span class="string">'y'</span>)</span><br><span class="line"><span class="number">20</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>getattr(obj,<span class="string">'z'</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">AttributeError: <span class="string">'MyObj'</span> object has no attribute <span class="string">'z'</span></span><br></pre></td></tr></table></figure><p>å¦‚æœè·å–ä¸€ä¸ªä¸å­˜åœ¨çš„å±æ€§ï¼Œä¼šæŠ¥é”™<code>&#39;MyObj&#39; object has no attribute &#39;z&#39;</code>.<br>å¯ä»¥è®¾ç½®<code>default</code>å‚æ•°ï¼Œå±æ€§ä¸å­˜åœ¨è¿”å›è¿™ä¸ªå‚æ•°å¯¹åº”çš„å€¼ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>getattr(obj,<span class="string">'z'</span>,<span class="string">'æ²¡æœ‰è¿™ä¸ªå±æ€§'</span>)</span><br><span class="line"><span class="string">'æ²¡æœ‰è¿™ä¸ªå±æ€§'</span></span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure><p>å¯¹è±¡çš„æ–¹æ³•åŒæ ·å¯ä»¥è·å–åˆ°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>hasattr(obj,<span class="string">'power'</span>)</span><br><span class="line"><span class="keyword">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>getattr(obj,<span class="string">'power'</span>)</span><br><span class="line">&lt;bound method MyObj.power of &lt;__main__.MyObj object at <span class="number">0x100d18d68</span>&gt;&gt;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong>åªæœ‰åœ¨ä¸çŸ¥é“å¯¹è±¡ä¿¡æ¯çš„æƒ…å†µä¸‹ï¼Œæ‰å›å»åˆ†æå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä½¿ç”¨dir()å‡½æ•°å¯ä»¥è·å–ä¸€ä¸ªPythonçš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªå­˜æ”¾å­—ç¬¦ä¸²çš„listã€‚&lt;br&gt;
    
    </summary>
    
      <category term="Python" scheme="http://yoursite.com/categories/Python/"/>
    
    
      <category term="Python" scheme="http://yoursite.com/tags/Python/"/>
    
      <category term="dir" scheme="http://yoursite.com/tags/dir/"/>
    
  </entry>
  
</feed>
